<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[812lcl的博客]]></title>
  <link href="http://812lcl.com/atom.xml" rel="self"/>
  <link href="http://812lcl.com/"/>
  <updated>2014-03-30T14:29:04+08:00</updated>
  <id>http://812lcl.com/</id>
  <author>
    <name><![CDATA[812lcl]]></name>
    <email><![CDATA[812liuchunlei@163.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[test-c]]></title>
    <link href="http://812lcl.com/blog/2014/03/30/test-c/"/>
    <updated>2014-03-30T09:15:00+08:00</updated>
    <id>http://812lcl.com/blog/2014/03/30/test-c</id>
    <content type="html"><![CDATA[<p class='post-footer'>
            original link:<a href='http://812lcl.com/blog/2014/03/30/test-c/'>http://812lcl.com/blog/2014/03/30/test-c/</a><br/>&nbsp;written by <a href='http://812lcl.com'>812lcl</a>&nbsp;posted at <a href='http://812lcl.com'>http://812lcl.com</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[重学C语言(四)——变量初始化]]></title>
    <link href="http://812lcl.com/blog/2013/12/28/zhong-xue-cyu-yan-si-bian-liang-chu-shi-hua/"/>
    <updated>2013-12-28T14:36:00+08:00</updated>
    <id>http://812lcl.com/blog/2013/12/28/zhong-xue-cyu-yan-si-bian-liang-chu-shi-hua</id>
    <content type="html"><![CDATA[<p>首先来声明几个概念：</p>

<p>存储类说明符：</p>

<p><code>auto  register  static  extern  typedef</code></p>

<p>类型说明符：</p>

<pre><code>void  char  short  int  long  float  double  
signed  unsigned  结构或联合说明符  
枚举说明符  类型定义名
</code></pre>

<p>类型限定符：</p>

<p><code>const  volatile</code></p>

<!--more-->


<h2>存储类</h2>

<p>存储类分为两类：自动存储类（automatic）和静态存储类（static）。声明对象时使用的一些关键字和声明的上下文共同决定了对象的存储类。自动存储类对象对于一个程序块来说是局部的，在退出程序块时该对象将消失。如果没有使用存储类说明符，或者使用了auto限定符，则程序块中的声明生成的都是自动存储类对象。声明为register的对象也是自动存储类对象，暗示了声明的对象将被频繁地访问。只有很少的对象被真正存放在在机器的快速寄存器中，并且只有特定的类型才可以。被声明为register的对象不能对它应用元运算符&amp;。</p>

<p>静态对象可以是某个程序块的局部对象，也可以是所有程序块的外部对象。无论是哪一种情况，在退出和再进入函数或程序块时其值将保持不变。静态变量只在第一次进入程序块时被初始化一次。在一个程序块（包含提供函数代码的程序块）内，静态对象用关键字static声明。在所有程序块外部声明且与函数定义在同一级的对象总是静态的。可以通过static关键字将对象声明为某个特定翻译单元的局部对象，这种类型的对象将具有内部链接。当省略显示的存储类或通过关键字extern进行声明时，对象对整个程序来说是全局可访问的，并且具有外部连接。函数内部的extern声明表明，被声明的对象的存储空间定义在其他地方。</p>

<h2>作用域规则</h2>

<p>名字的作用域指的是程序中可以使用该名字的部分。对于在函数开头声明的自动变量来说，其作用域是声明该变量的函数。不同函数中声明的具有相同名字的各个局部变量之间没有任何关系。函数的参数实际上可以看做是局部变量。</p>

<p>外部变量或函数的作用域从声明它的地方开始，到其所在的（带编译）的文件的末尾结束。</p>

<p>另一方面，如果要在外部变量的定义之前使用该变量，或外部变量的定义与变量的使用不在同一个源文件中，则必须在相应变量声明中强制性地使用关键字extern。</p>

<p>将外部变量的声明与定义严格区分开来很重要。变量声明用于说明变量的属性（主要是变量的类型），而变量定义除此以外还将引起存储器的分配。</p>

<p>在一个源程序的所有源文件中，一个外部变量只能在某个文件中定义一次，而其他文件可以通过extern声明来访问它（定义外部变量的源文件中也可以包含对该外部变量的extern声明）。外部变量的定义中必须指定数组的长度，但extern声明则不一定要指定数组的长度。</p>

<p>用static声明限定外部变量与函数，可以将其后声明的对象的作用域限定为被编译源文件的剩余部分。通过static限定外部对象，可以达到隐藏外部对象的目的。static类型的内部变量是一种只能在某个特定函数中使用但一直占据存储空间的变量。</p>

<p>外部变量的初始化只能出现在其定义中。</p>

<p>在一个好的程序设计风格中，应该避免出现变量名隐藏外部作用域中相同名字的情况，否则，很可能引起混乱和错误。</p>

<h2>初始化</h2>

<p>声明对象时，对象的初始化声明符可以为其指定一个初始值。初值紧跟在运算符<code>=</code>之后，它可以是一个表达式，也可以是嵌套在花括号中的初值序列。初值序列可以以逗号结束，这样可以使格式简洁美观。</p>

<p>如果变量不是自动变量，则只能进行一次初始化操作，从概念上讲，应该是在程序开始执行之前进行，并且初始化表达式必须为常量表达式。每次进入函数或程序块时，显式初始化的自动变量都将被初始化一次，其初始化表达式可以是任何表达式。</p>

<p>对静态对象或数组而言，初值中的所有表达式必须是常量表达式。如果初值是用花括号括起来的初值表，则对auto或register类型的对象或数组来说，初值中的表达式也同样必须是常量表达式。但是自动对象的初值是一个单个的表达式，则它不必是常量表达式，但必须符合对象赋值的类型要求。</p>

<p>未显示初始化的静态对象将被隐式初始化，其效果等同于它（或它的成员）被赋以常量0。未显示初始化的自动对象的初始值没有定义。</p>

<p>指针或算数类型对象的初值是一个单个的表达式，也可能扩在花括号中。该表达式将被赋值给对象。</p>

<p>结构的初值可以是类型相同的表达式，也可以是扩在花括号中的按其成员次序排列的处置表。无名的位字段成员将被忽略，因此不被初始化。如果表中的初值的数目比结构的成员数少，则后面余下的结构成员将被初始化为0。初值的数目不能比成员数多。</p>

<p>数组的初值是一个括在花括号中的、由数组成员的初值构成的表。如果数组大小未知，则初值的数目将决定数组的大小，从而使数组类型成为完整类型。若数组大小固定，则初值的数目不能超过数组成员的数目。如果初值数目比数组成员数目少，则尾部余下的数组成员将被初始化为0。</p>

<p>联合的初值可以是类型相同的单个表达式，也可以是括在花括号中的联合的第一个成员的初值。</p>

<p class='post-footer'>
            original link:<a href='http://812lcl.com/blog/2013/12/28/zhong-xue-cyu-yan-si-bian-liang-chu-shi-hua/'>http://812lcl.com/blog/2013/12/28/zhong-xue-cyu-yan-si-bian-liang-chu-shi-hua/</a><br/>&nbsp;written by <a href='http://812lcl.com'>812lcl</a>&nbsp;posted at <a href='http://812lcl.com'>http://812lcl.com</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[重学C语言(三)——复杂声明分析]]></title>
    <link href="http://812lcl.com/blog/2013/12/22/zhong-xue-cyu-yan-san-fu-za-sheng-ming-fen-xi/"/>
    <updated>2013-12-22T12:14:00+08:00</updated>
    <id>http://812lcl.com/blog/2013/12/22/zhong-xue-cyu-yan-san-fu-za-sheng-ming-fen-xi</id>
    <content type="html"><![CDATA[<p><a href="http://812lcl.github.io/blog/2013/12/21/zhong-xue-cyu-yan-er-yun-suan-fu-you-xian-ji-yu-ji-suan-shun-xu/">上一篇文章</a>是关于运算符的优先级的，这篇文章则来说说关于C语言中的复杂声明。C语言中的声明是不能从左往右读的，时而往左时而往右，有时候弄得人头大，什么数组指针、指针数组傻傻弄不清楚，函数指针更是模棱两可。复杂声明更是令人敬而远之了，常常被作为例子的就是系统调用里的signal函数了，它在signal.h中声明的，声明如下</p>

<pre><code>void (*signal(int, void(*)))(int);
</code></pre>

<p>是不是需要琢磨一番呢，其实在经典的C语言书籍中都很清楚地讲过这个问题了，C专家编程里讲得十分的好，而且这本书也十分的好，作者还时不时的小幽默一把。</p>

<!--more-->


<h2>1. 声明是如何形成的</h2>

<p>首先看一些C语言的术语以及一些能组合成一个声明的单独语法成分。其中一个非常重要的成分就是声明器(declarator)——它是所有声明的核心。简单的说，声明器就是标识符以及与它组合在一起的任何指针、函数括号、数组下标等。</p>

<p>声明器语法如下所示</p>

<pre><code>指针 opt 直接声明器
</code></pre>

<p>详细可见下表</p>

<pre><code>数量                C语言中的名字           C语言中的出现形式
-------------------------------------------------------------
零个或多个          指针                    下列形式之一：
                                            * const volatile
                                            * volatile
                                            *
                                            * const
                                            * volatile const
-------------------------------------------------------------
有且只有一个        直接声明器                   标识符
                                         或：标识符[下标]
                                         或：标识符(参数)
                                         或：(声明器)
</code></pre>

<p>一个声明由下表所示的各个部分组成（并非所有组合形式都是合法
的）。声明确定了变量的基本类型以及初始值（如果有）。</p>

<pre><code>数量                C语言中的名字           C语言中出现的名字
-------------------------------------------------------------
至少一个类型说明符     类型说明符            void char short int long
（并非所有组合都合法）  (type-specifier)    signed unsigned float double
                                        结构说明符(struct-specifier)
                                        枚举说明符(enum-specifier)
                                        联合说明符(union-specifier)
                    存储类型              extern static register
                    (storage-class)     auto typedef
                    类型限定符            const volatile
                    (type-qualifier)
-------------------------------------------------------------
有且只有一个          声明器                参见上表
-------------------------------------------------------------
零个或更多            更多的声明器          ,声明器
-------------------------------------------------------------
一个                 分号                ；
</code></pre>

<p>在合法的声明中存在限制条件，不可以像下面这样做：</p>

<ul>
<li><p>函数的返回值不能是一个函数</p></li>
<li><p>函数的返回值不能是一个数组</p></li>
<li><p>数组里面不能有函数</p></li>
</ul>


<p>但下面的是合法的：</p>

<ul>
<li><p>函数的返回值允许是一个函数指针</p></li>
<li><p>函数的返回值允许是一个指向数组的指针</p></li>
<li><p>数组里面允许有函数指针</p></li>
<li><p>数组里面允许有其他数组</p></li>
</ul>


<h2>2. 优先级规则</h2>

<p>上一节是讲声明的各个组成部分，本节描述了一种方法，用通俗的语言把声明分解开来，分别解释各个组成部分。要理解一个声明，必须要懂得其中的优先级规则(没错，又是优先级)，语言律师们最喜欢这种形式，它高度简洁，可惜即不直观。</p>

<p>理解C语言声明的优先级规则</p>

<pre><code>A   声明从它的名字开始读取，然后按照优先级顺序依次读取。
B   优先级从高到低依次是：
    B.1 声明中被括号括起来的部分
    B.2 后缀操作符：
        括号（）表示这是一个函数，而
        方括号[]表示这是一个数组。
    B.3 前缀操作符：`*`表示“指向...的指针”
C   如果const和（或）volatile关键字的后面紧跟类型说明符（如int, long等），那么它作用于
    类型说明符。在其他情况下，const和（或）volatile关键字作用于它左边紧邻的指针星号。
</code></pre>

<p>可以试着用优先级规则分析一下</p>

<pre><code>char * const *(*next)();
</code></pre>

<h2>3. 通过图表分析C语言的声明</h2>

<p>本节通过一张里面标明了分析步骤的图，按图索骥，从第一步开始，顺着箭头逐步往下分析，无论多么复杂的C语言声明都可以迎刃而解，都可以用最通俗的语言来解释。</p>

<p><img src="http://812lcl.github.io/images/blog/dcl.png" alt="解析C语言的声明" /></p>

<p>开始我们从左向右寻找，直到找到第一个标识符。当声明中的某个符号与图中所示匹配时，便把它从声明中处理掉，以后不再考虑。在具体的每一步骤上，我们首先查看右边的符号，再看左边的。</p>

<p>当所有的符号都被处理完毕后，便宣告大功告成。</p>

<p>可以试着用图表分析法分析上边的那个例子。</p>

<h2>4. 一个例子</h2>

<p>现在，我们再回头看一下之前提到的signal函数的声明。</p>

<pre><code>void (*signal(int, void(*)))(int);
</code></pre>

<p>首先标识符是signal，它右边紧跟了括号，则表示“signal是一个返回&hellip;的函数”；</p>

<p>这个函数有两个参数：一个是<code>int</code>型，一个是<code>void (*)</code>型的，即返回值为void的函数指针。</p>

<p>它的返回类型则是<code>void (*)(int)</code>型，即一个返回值为void，有一个int型参数的函数指针。</p>

<p>说着这么绕呢，其实现在看来这个声明还是挺清晰的了。signal函数的第二个参数就是信号处理函数的函数指针，信号处理函数接受一个int型参数，表示接到的是几号信号。</p>

<hr />

<p>其实可以编写一个能够分析C语言的声明，并把它们翻译成通俗语言的程序。可以通过堆栈实现，也可以用有限状态机来实现，都可以加深对复杂声明的理解，而且很好的练习编码。</p>

<h2>参考书籍</h2>

<ul>
<li><p>C专家编程</p></li>
<li><p>C陷阱与缺陷</p></li>
<li><p>C程序设计语言</p></li>
</ul>


<p class='post-footer'>
            original link:<a href='http://812lcl.com/blog/2013/12/22/zhong-xue-cyu-yan-san-fu-za-sheng-ming-fen-xi/'>http://812lcl.com/blog/2013/12/22/zhong-xue-cyu-yan-san-fu-za-sheng-ming-fen-xi/</a><br/>&nbsp;written by <a href='http://812lcl.com'>812lcl</a>&nbsp;posted at <a href='http://812lcl.com'>http://812lcl.com</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[重学C语言(二)——运算符优先级与计算顺序]]></title>
    <link href="http://812lcl.com/blog/2013/12/21/zhong-xue-cyu-yan-er-yun-suan-fu-you-xian-ji-yu-ji-suan-shun-xu/"/>
    <updated>2013-12-21T14:36:00+08:00</updated>
    <id>http://812lcl.com/blog/2013/12/21/zhong-xue-cyu-yan-er-yun-suan-fu-you-xian-ji-yu-ji-suan-shun-xu</id>
    <content type="html"><![CDATA[<p>对于一个复杂的表达式，存在很多的运算符，要了解这个表达式的意义，就要了解清运算符之间的优先关系与结合顺序。要确保表达式实现自己所想达成的目的，了解计算顺序也是非常必要的。</p>

<h2>1. 运算符优先级与结合顺序</h2>

<p>复杂的表达式可能会有较多的运算符，有时候弄的头大，虽然可以添加括号来使表达式的意义更加明确，但有时候括号太多也会造成混乱，而更不容易理解。掌握C语言中的运算符优先级是非常必要的，也是非常有益的。</p>

<p>下表列出了各类运算符的优先级关系与结合顺序，表中由上至下，优先级依次递减。</p>

<!--more-->


<pre><code>运算符                                          结合性
() [] -&gt; .                                    自左向右
! ~ ++ -- + - (type) * &amp; sizeof               自右向左
* / %                                         自左向右
+ -                                           自左向右
&lt;&lt; &gt;&gt;                                         自左向右
&lt; &lt;= &gt; &gt;=                                     自左向右
== !=                                         自左向右
&amp;                                             自左向右
^                                             自左向右
|                                             自左向右
&amp;&amp;                                            自左向右
||                                            自左向右
?:                                            自右向左
assignments                                   自右向左
,                                             自左向右
</code></pre>

<p>15级的优先级，看似复杂难记，其实都是蕴含着一定的规律的。</p>

<p>首先，优先级最高的并不是真正意义上的运算符，如数组下标、函数调用操作符和结构成员选择符。它们的结合顺序都是自左向右的。如<code>a.b.c</code>表示<code>(a.b).c</code>，而不是<code>a.(b.c)</code>。</p>

<p>单目运算符的优先级仅次于上一种，是真正意义的运算符中优先级最高的。其中的<code>+ -</code>不是加号减号，而是正负号；<code>*</code>是表示指针，不是乘号。现在知道<code>*</code>的优先级是低于<code>[]</code>的，所以<code>int *p[10]</code>中表示p首先是一个数组，然后数组中的元素是一个指向int型的指针，即是一个指针数组。可见了解了运算符的优先级对于掌握复杂声名的分析也是有帮助的。单目运算符是自右向左结合的，所以<code>*p++</code>表示<code>*(p++)</code>而不是<code>(*p)++</code>。</p>

<p>接下来是双目运算符。在双目运算符中，算术运算符优先级最高，移位运算符次之，关系运算符再次之，然后是逻辑运算符，条件运算符，最后是各类赋值运算符。其中条件运算符是三目运算符。</p>

<p>需要记住的最重要的两点是：</p>

<ol>
<li><p>任何一个逻辑运算符的优先级低于任何一个关系运算符。</p></li>
<li><p>移位运算符的优先级比算术运算符要低，但高于关系运算符。</p></li>
</ol>


<p>算术运算符中乘除、取余优先于加减。关系运算符中注意一下，<code>== !=</code>的优先级低于其他四个关系运算符。</p>

<p>而逻辑运算符中任何两个都有不同的优先级，都是与关系高于或。<code>&amp; |</code>高于<code>&amp;&amp; ||</code>则是因为，前者在B语言中已经出现，而在B的基础上出现的C语言又加入了后者来区分不同的操作，从兼容性的角度，修改其优先顺序很危险。</p>

<p>条件运算符是唯一的三目运算符，优先级也是很低的，仅高于赋值运算符和逗号运算符。赋值运算符次之，这两类运算符的结合顺序是<code>自右向左</code>的。所以</p>

<pre><code>a=b=0;
</code></pre>

<p>等同于</p>

<pre><code>b=0;
a=0;
</code></pre>

<p>最后则是逗号运算符。被逗号分隔的一对表达式按照自左向右的顺序进行求值，表达式右边的操作数的类型和值即为其结果的类型和值。在for循环中常用逗号操作符，如下：</p>

<pre><code>for(i=0, j = strlen(s)-1; i &lt; j; i++, j--)
</code></pre>

<p>某些情况下的逗号并不是运算符，如分隔函数参数的逗号，分隔声明中变量的逗号等。这些逗号<code>并不保证各表达式自左向右的顺序求值</code>。应谨慎用逗号运算符，其最适用与关系紧密的结构中，如for循环、元素交换操作。</p>

<p>有时候表达式写的不规范或马虎，也会造成一些麻烦。如表达式<code>z = y+++x</code>，原本的意图可能是<code>z = y + ++x</code>或是<code>z = y++ + x</code>，但缺少了空格使人迷惑。ANSI C规定了一种逐渐为人所熟知的“maximal munch strategy”。这种策略表示如果下一个标记有超过一种的解决方案，编译器将选择能组成最长字符串序列的方案。所以这个表达式将被解析为后一种意思。但这也会造成一些麻烦，如<code>z = y+++++x</code>将被解析为<code>z = y++ ++ + x</code>就出现了错误。</p>

<p>所以当我们编写代码时，还是要认真一些，遵循一定的编程规范。</p>

<h2>2. 计算顺序</h2>

<p>讨论完了运算符优先级与结合顺序的问题，计算顺序则完全是另一码事了，不要和结合顺序搞混。C语言没有指定同一运算符中多个操作数的计算顺序（&amp;&amp;、||、?:和逗号运算符除外）。例如</p>

<pre><code>x = f() + g();
</code></pre>

<p>的语句中，f()可以在g()之前计算，也可以在其后计算。因此，如果两个函数改变了同一变量，则x的结果将依赖与两个函数的计算顺序。类似的，C语言也没有指定函数各参数的求值顺序。函数调用、嵌套赋值语句、自增、自减运算符都可能产生副作用。</p>

<p>在任何一门编程语言中，如果代码的执行结果与求值顺序相关，则都是不好的程序设计风格。</p>

<p>参考书籍</p>

<ul>
<li><p>C程序设计语言</p></li>
<li><p>C专家编程</p></li>
<li><p>C陷阱与缺陷</p></li>
</ul>


<p class='post-footer'>
            original link:<a href='http://812lcl.com/blog/2013/12/21/zhong-xue-cyu-yan-er-yun-suan-fu-you-xian-ji-yu-ji-suan-shun-xu/'>http://812lcl.com/blog/2013/12/21/zhong-xue-cyu-yan-er-yun-suan-fu-you-xian-ji-yu-ji-suan-shun-xu/</a><br/>&nbsp;written by <a href='http://812lcl.com'>812lcl</a>&nbsp;posted at <a href='http://812lcl.com'>http://812lcl.com</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[重学C语言(一)——类型转换]]></title>
    <link href="http://812lcl.com/blog/2013/12/17/zhong-xue-cyu-yan-%5B%3F%5D-lei-xing-zhuan-huan/"/>
    <updated>2013-12-17T19:42:00+08:00</updated>
    <id>http://812lcl.com/blog/2013/12/17/zhong-xue-cyu-yan-[?]-lei-xing-zhuan-huan</id>
    <content type="html"><![CDATA[<h2>1. 整型提升</h2>

<p>在一个表达式中，凡是可以使用整型的地方都可以使用带符号或无符号的字符、短整型或整型位字段，还可以使用枚举类型的对象。如果原始类型的所有值都可用int类型表示，则其值将被转换为int类型；否则将被转换为unsigned int类型。这一过程称为整型提升。</p>

<p>以下面的代码为例：</p>

<p><code>printf(" %d ", sizeof'A');</code></p>

<p>这个代码本想打印出一个字符字面值类型的长度，但你会发现结果是4（或是你机器上int的长度）。这里就根据提升规则，由char转换为int。</p>

<!--more-->


<h2>2. 整型转换</h2>

<p>将任何整数转换为某种指定的无符号类型数的方法是：以该无符号类型能够表示的最大值加1为模，找出与此整数同余的最小的非负值。在对二的补码表示中，如果该无符号类型的为模式比较窄，这就相当于左截取；如果该无符号类型的为模式比较宽，这就相当于对带符号值进行符号扩展和对无符号值进行0填充。</p>

<p>将任何整数转换为带符号类型时，如果它可以在新类型中表示出来，则其值保持不变，否则它的值同具体的实现有关。</p>

<h2>3. 整数和浮点数</h2>

<p>当把浮点类型的值转换为整型时，小数部分将被丢弃。如果结果值不能用整型表示，则其行为是未定义的。特别是，将负的浮点数转换为无符号整型的结果是没有定义的。</p>

<p>当把整型值转换为浮点类型时，如果该值在该浮点类型可表示的范围内但不能精确表示，则结果可能是下一个较高或较低的可表示值。如果该值超出可表示的范围，则其行为是为定义的。</p>

<h2>4. 浮点类型</h2>

<p>将一个精度较低的浮点值转换为相同或更高精度的浮点类型时，它的值保持不变。将一个较高精度的浮点类型值转换为较低精度的浮点类型时，如果它的值在可表示范围内，则结果可能是下一个较高或较低的可表示值。如果结果在可表示范围之外，则其行为是为定义的。</p>

<p>表达式中的float类型的操作数不会自动转换为double类型。一般来说，数学函数使用double类型的变量。使用float类型主要是为了在使用较大的数组时节省存储空间，有时也为了节省机器执行时间（double算术运算特别费时）。</p>

<h2>5. 算术类型转换</h2>

<p>许多运算符都会以类似的方式在运算过程中引起转换，并产生结果类型。其效果是将所有操作数转换为同一公共类型，并以此作为结果的类型。这种方式的转换称为普通算术类型转换。</p>

<p>首先，如果任何一个操作数为long double类型，则将另一个操作数转换为long double类型。</p>

<p>否则，如果任何一个操作数为double类型，则将另一个操作数转换为double类型。</p>

<p>否则，如果任何一个操作数为float类型，则将另一个操作数转换为float类型。</p>

<p>否则，同时对两个操作数进行整型提升；然后，如果任何一个操作数为unsigned long int类型，则将另一个操作数转换为unsigned long int类型。</p>

<p>否则，如果一个操作数为long int类型且另一个操作数为unsigned int类型，则结果依赖于long int类型是否可以表示所有的unsigned int类型的值。如果可以，则将unsigned int类型的操作数转换为long int；如果不可以，则将两个操作数都转换为unsigned long int类型。</p>

<p>否则，如果一个操作数为long int类型，则将另一个操作数转换为long int类型。</p>

<p>否则，如果任何一个操作数为unsigned int类型，则将另一个操作数转换为unsigned int类型。</p>

<p>否则，将两个操作数都转换为int类型。</p>

<p>用通俗语言，大致意思如下：</p>

<blockquote><p>当执行算术运算时：操作数的类型如果不同，就会发生转换。数据类型一般朝着浮点精度更高，长度更长的方向转换，整型数如果转换为signed不会丢失信息，就转换为signed，否则转换为unsigned。</p></blockquote>

<p>例如，如果f为float类型，n为int类型，那么表达式</p>

<p><code>(n &gt; 0) ? f : n</code></p>

<p>是float类型，与n是否为正值无关。</p>

<h2>6. 参数传递中的类型转换</h2>

<p>在参数传递过程中会发生隐式类型转换，这是需要注意的地方。由于函数的参数也是表达式，所以也会发生类型提升。如果使用了适当的函数原型，类型提升便不会发生，否则也会发生。在被调用函数的内部，提升后的参数被裁剪为原先声明的大小。</p>

<p>ANSI C的函数原型就是采取一种新的函数声明形式，把参数的类型也包含于声明之中。</p>

<p>在C语言中，我们没有办法可以将一个数组作为参数直接传递。如果我们使用数组名作为参数，那么数组名会立刻被转换为指向数组第一个元素的指针。因此，将数组作为函数参数毫无意义。所以，C语言中会自动地将作为参数的数组声明转换为相应的指针声明。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>实参                                所匹配的形式参数
</span><span class='line'>数组的数组      char c[8][10];      char(*c)[10];    数组指针
</span><span class='line'>指针数组        char *c[15];        char **c;       指针的指针
</span><span class='line'>数组指针        char (*c)[64];      char (*c)[64];  不改变
</span><span class='line'>指针的指针      char **c;           char **c;       不改变</span></code></pre></td></tr></table></div></figure>


<p>你之所以能在main()函数中看到<code>char **argv</code>这样的参数，是因为argv是个指针数组(<code>char *argv[]</code>)。这个表达式被编译器改写为指向数组第一个元素的指针，也就是一个指向指针的指针。</p>

<h2>7. 指针和整数</h2>

<p>指针可以加上或减去一个整型表达式。在这种情况下，整型表达式的转换按照加法运算符的方法进行。</p>

<p>两个指向同一数组中同一类型的对象的指针可以进行减法运算，其结果将被转换为整型；转换方式按照减法的方式进行。</p>

<p>值为0的整型常量表达式或强制转换为void *类型的表达式可以通过强制类型转换、赋值或比较操作转换为任意类型的指针。其结果将产生一个空指针，此空指针等于指向同一类型的另一空指针，但不等于任何指向函数或对象的指针。</p>

<p>还允许进行指针相关的其他某些转换，但其结果依赖于具体实现。这些转换必须由一个显示的类型转换运算符或强制类型转换来指定。</p>

<p>指针可以转换为整型，但此整型必须足够大;所要求的大小依赖于具体的实现。映射函数也依赖于具体的实现。</p>

<p>整型对象可以显式地转换为指针。这种映射总是将一个足够宽的从指针转换来的整数转换为同一个指针，其他情况依赖于具体的实现。</p>

<p>指向某一类型的指针可以转换为指向另一类型的指针，但是，如果该指针指向的对象不满足一定的存储对齐要求，则结果指针可能会导致地址异常。指向某对象的指针可以转换为一个指向具有更小或相同存储对齐限制的对象的指针，并可以保证原封不动地再转回来。“对齐”的概念依赖于具体的实现，但char类型的对象具有最小的对齐限制。指针也可以转换为void * 类型，并可原封不动地转换回来。</p>

<p>一个指针可以转换为同类型的另一个指针，但增加或删除了指针所指的对象类型的限定符除外。如果增加了限定符，则新指针与原指针等价，不同的是增加了限定符带来的限制。如果删除了限定符，则对底层对象的运算仍受实际声明中的限定符的限制。</p>

<p>最后，指向一个函数的指针可以转换为指向另一个函数的指针。调用转换后指针所指的函数的结果依赖于具体的实现。但是，如果转换后的指针被重新转换为原来的类型，则结果与原来的指针一致。</p>

<h2>8. void</h2>

<p>void对象的值不能够以任何方式使用，也不能被显式或隐式地转换为任一非空类型。因为空（void）表达式表示一个不存在的值，这样的表达式只可以用在不需要值的地方，例如作为一个表达式语句或作为逗号运算符的做操作数。</p>

<p>可以通过强制类型转换将表达式转换为void类型。例如，在表达式语句中，一个空的强制类型转换将丢掉函数调用的返回值。</p>

<h2>9. 指向void的指针</h2>

<p>指向任何对象的指针都可以转换为void * 类型，且不会丢失信息。如果将结果再转换为初始指针类型，则可以恢复初始指针。之前讨论过，执行指针的转换时，一般需要显式的强制转换，这里不同的是，指针可以被赋值为void * 类型的指针，也可以赋值给void * 类型的指针，并可与void * 类型的指针进行比较。</p>

<h2>10. 强制类型转换</h2>

<p>之前都在说隐式类型转换，在任何表达式中都可以使用一个称为强制类型转换的一元运算符强制进行显式类型转换。</p>

<p>(类型名) 表达式</p>

<h3>参考文献</h3>

<ul>
<li><p>C程序设计语言</p></li>
<li><p>C专家编程</p></li>
<li><p>C缺陷与陷阱</p></li>
</ul>


<p class='post-footer'>
            original link:<a href='http://812lcl.com/blog/2013/12/17/zhong-xue-cyu-yan-%5B%3F%5D-lei-xing-zhuan-huan/'>http://812lcl.com/blog/2013/12/17/zhong-xue-cyu-yan-%5B%3F%5D-lei-xing-zhuan-huan/</a><br/>&nbsp;written by <a href='http://812lcl.com'>812lcl</a>&nbsp;posted at <a href='http://812lcl.com'>http://812lcl.com</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[VIM补全配置]]></title>
    <link href="http://812lcl.com/blog/2013/12/06/vimbu-quan-pei-zhi/"/>
    <updated>2013-12-06T18:54:00+08:00</updated>
    <id>http://812lcl.com/blog/2013/12/06/vimbu-quan-pei-zhi</id>
    <content type="html"><![CDATA[<p>vim已经自带了补全功能，通过几个补全插件可以使其补全发挥的更出色，以下主要介绍5种不同的补全，并不需要全部安装，根据需求选择安装，具体安装方法可以见<a href="http://812lcl.github.io/blog/2013/12/04/vimcha-jian-pei-zhi-xu/">VIM插件配置续</a>或<a href="http://812lcl.github.io/blog/2013/10/24/vimcha-jian-pei-zhi-%2Cbi-jian-ide/">Vim插件配置，比肩IDE</a>。</p>

<h2>1. <a href="https://github.com/vim-scripts/javacomplete">javacomplete</a></h2>

<p>这个是个java补全的插件，需要编译以下autoload目录下的Reflection.java，然后将编译生成的Reflection.class文件移动到主目录下即可。当然要实现补全功能，必须在vim中开启文件类型识别，不多述了。</p>

<p>另外Java补全，还可以使用<a href="http://eclim.org/">eclim</a>。</p>

<!--more-->


<p><img src="http://pic002.cnblogs.com/images/2012/342823/2012041511171014.png" alt="javacomplete" /></p>

<h2>2. <a href="https://github.com/vim-scripts/OmniCppComplete">omnicppcomplete</a></h2>

<p>这个插件是用来补全C++的，需要ctags生成项目的tag文件并加载到当前vim中，然后可以根据<code>. -&gt; ::</code>等符号自动补全，在之前的文章中也都介绍过了。</p>

<h2>3. <a href="https://github.com/Shougo/neocomplcache.vim">neocomplcache</a></h2>

<p>Original filename completion</p>

<p><img src="https://github-camo.global.ssl.fastly.net/5c0c143ad7b1b39fb3a1ec5e2b39c315d6e70391/687474703a2f2f312e62702e626c6f6773706f742e636f6d2f5f63693279426e717a4a674d2f5444314f355f624f5132492f41414141414141414144452f7648663958675f6d7254492f73313630302f66696c656e616d655f636f6d706c6574652e706e67" alt="neocomplcache" /></p>

<p>Omni completion</p>

<p><img src="https://github-camo.global.ssl.fastly.net/9fc2701fcb8b4a54ab9e0d0ff2902b11aadb825f/687474703a2f2f322e62702e626c6f6773706f742e636f6d2f5f63693279426e717a4a674d2f54443150546f6c6b5442492f41414141414141414144552f6b6e4a33656e69754857492f73313630302f6f6d6e695f636f6d706c6574652e706e67" alt="neo" /></p>

<p>这种补全我是作为<code>clang-complete</code>或<code>YouCompleteMe</code>的一种补充，对于
/nginx/tmux/shell/vimscript等文件，它都有默认的关键字支持，还有目录文件
补全，一边输入就会一边列出可以补全的项，而不用按&lt;c-x>&lt;c-f>等命令来选择
不同的补全，可以使用&lt;c-p>或&lt;c-n>进行上下选择不同的补全，如果有supertab
插件更是如虎添翼了。</p>

<p>这是我在配合YCM的时候的配置，由YCM补全c、cpp、java、python的文件，其他文件的补全则由neocomplcache实现。配置文件查看<a href="https://github.com/812lcl/.vim">.vim</a>。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>let g:neocomplcache_enable_at_startup = 1
</span><span class='line'>au Filetype c,cpp,java,python let g:neocomplcache_enable_at_startup = 0
</span><span class='line'>set dict+=$HOME/.vim/static/dict_with_cases
</span><span class='line'>let g:neocomplcache_dictionary_filetype_lists = {'_' : $HOME . "/.vim/static/english_dict"}
</span><span class='line'>let g:neocomplcache_auto_completion_start_length = 1
</span><span class='line'>let g:neocomplcache_enable_smart_case = 1
</span><span class='line'>let g:neocomplcache_enable_fuzzy_completion = 1               " 开启模糊匹配
</span><span class='line'>let g:neocomplcache_fuzzy_completion_start_length = 3         " 3个字母后开启模糊匹配
</span><span class='line'>let g:neocomplcache_min_syntax_length = 3
</span><span class='line'>let g:neocomplcache_lock_buffer_name_pattern = '\*ku\*'</span></code></pre></td></tr></table></div></figure>


<p>在和clang-complete配合补全时，会有一些冲突，配置时需要配置时去除冲突。配置文件查看<a href="https://github.com/812lcl/vim_withoutYCM">vim_withoutYCM</a>。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>let g:neocomplcache_enable_at_startup = 1
</span><span class='line'>let g:neocomplcache_enable_smart_case = 1
</span><span class='line'>let g:neocomplcache_min_syntax_length = 3
</span><span class='line'>let g:neocomplcache_lock_buffer_name_pattern = '\*ku\*'
</span><span class='line'>
</span><span class='line'>if !exists('g:neocomplcache_force_omni_patterns')
</span><span class='line'>        let g:neocomplcache_force_omni_patterns = {}
</span><span class='line'>endif
</span><span class='line'>let g:neocomplcache_force_overwrite_completefunc = 1
</span><span class='line'>let g:neocomplcache_force_omni_patterns.c =
</span><span class='line'>                        \ '[^.[:digit:] *\t]\%(\.\|-&gt;\)'
</span><span class='line'>let g:neocomplcache_force_omni_patterns.cpp =
</span><span class='line'>                        \ '[^.[:digit:] *\t]\%(\.\|-&gt;\)\|\h\w*::'
</span><span class='line'>let g:neocomplcache_force_omni_patterns.objc =
</span><span class='line'>                        \ '[^.[:digit:] *\t]\%(\.\|-&gt;\)'
</span><span class='line'>let g:neocomplcache_force_omni_patterns.objcpp =
</span><span class='line'>                        \ '[^.[:digit:] *\t]\%(\.\|-&gt;\)\|\h\w*::'
</span><span class='line'>let g:clang_complete_auto = 0
</span><span class='line'>let g:clang_auto_select = 0</span></code></pre></td></tr></table></div></figure>


<h2>4. <a href="https://github.com/vim-scripts/clang-complete">clang-complete</a></h2>

<p>这也是用于C/C++/Objective-C/Objective-C++的补全，它是利用clang自动分析当前项目，实现补全，比omnicppcoplete方便且高级多了，不需要每一次生成tag文件并加载了。这个插件需要系统安装了clang，对vim也有一定的要求，需要7.3以上且支持python。把需要的东西都安装好，将插件放入<code>~/.vim/bundle</code>目录下即可使用，并不需要在<code>.vimrc</code>中添加什么配置，很是方便。试用了下效果很不错，而且使用这个插件比YCM可是轻便多了，整个.vim目录也不过几MB而已，而且不用耗费心力配置。所以对YCM编译发憷的同志们使用这个插件也可满足了，只不过据说在工程文件太大的时候它比较慢。## 5. <a href="https://github.com/Valloric/YouCompleteMe">YouCompleteMe</a><img src="https://github-camo.global.ssl.fastly.net/1f3f922431d5363224b20e99467ff28b04e810e2/687474703a2f2f692e696d6775722e636f6d2f304f50346f6f642e676966" alt="YCM" /></p>

<p>重头戏登场了，从名字来看就够霸气了，公认的补全神奇，只不过属于编译行插件，稍微麻烦一些，而且体积确实大了一些，编译完后这个插件就达到了七八十MB大小。不过补全效果最好，支持<code>C/C++/Objective-C/Objective-C++</code>的补全，还支持基于Jedi的Python补全和基于OmniSharp的C#补全，号称安了这个插件就不需要下面四个了</p>

<ul>
<li>clang_complete</li>
<li>AutoComplPop</li>
<li>Supertab</li>
<li>neocomplcache</li>
</ul>


<p>而且这插件和Syntastic和ultisnips的配合也都很好。而我最终选用这个插件是因为它支持模糊匹配功能，你只需要输入想要输入的单词的子序列即可匹配到，如你想匹配的名为<code>printf</code>，只需输入<code>ptf</code>即可。而且它还支持从一个变量跳转到它的声明或定义处的功能，都是很好用的，所以费了一番功夫编译好它还是值得的。</p>

<p>这个插件是需要<code>build-essential</code>、<code>camke</code>、<code>clang</code>、<code>python-dev</code>等很多支持的，还需要vim高于7.3.584。ubuntu用户需要重新编译安装更高版本的vim了，方法参见<a href="https://github.com/Valloric/YouCompleteMe/wiki/Building-Vim-from-source">compile Vim from source</a>，fedor用户就省事多了。具体编译和使用参看<a href="https://github.com/Valloric/YouCompleteMe">项目主页</a>即可。</p>

<p>看过好多博客写的YCM编译的教程，最后还是感觉项目主页上的原版安装教程最好，所以我也就不过多介绍了，而且编译过程中可能出现各种问题，仔细阅读作者的教程，一切问题都可以解决。</p>

<p>因为移植其他电脑，需要重新编译一遍，有时候费时费力，我就把编译好的一个YouCompleteMe包存在我的<code>.vim/bundle</code>中了，把其他依赖工具包安装好了，直接解压缩到bundle目录中即可使用YCM了，省心多了，可以参看我的<a href="https://github.com/812lcl/">.vim</a>。</p>

<p>我的YCM配置如下</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>set completeopt=longest,menu                                        " 关掉补全时的预览窗口
</span><span class='line'>let g:ycm_confirm_extra_conf = 0                                 " 不用每次提示加载.ycm_extra_conf.py文件
</span><span class='line'>let g:ycm_global_ycm_extra_conf = '~/.vim/bundle/YouCompleteMe/cpp/ycm/.ycm_extra_conf.py'
</span><span class='line'>let g:ycm_filetype_whitelist = {'c' : 1, 'cpp' : 1, 'java' : 1, 'python' : 1}
</span><span class='line'>let g:ycm_complete_in_comments = 1                                 " 评论中也应用补全
</span><span class='line'>let g:ycm_min_num_of_chars_for_completion = 1         " 一个字开始补全
</span><span class='line'>let g:ycm_seed_identifiers_with_syntax = 1
</span><span class='line'>let g:ycm_key_invoke_completion = '&lt;C-Space&gt;'
</span><span class='line'>let g:ycm_semantic_triggers =  {'c' : ['-&gt;', '.'], 'objc' : ['-&gt;', '.'], 'ocaml' : ['.', '#'], 'cpp,objcpp' : ['-&gt;', '.', '::'], 'php' : ['-&gt;', '::'], 'cs,java,javascript,vim,coffee,python,scala,go' : ['.'], 'ruby' : ['.', '::']}
</span><span class='line'>nnoremap &lt;F5&gt; :YcmForceCompileAndDiagnostics&lt;CR&gt;
</span><span class='line'>nnoremap &lt;leader&gt;jd :YcmCompleter GoToDefinitionElseDeclaration&lt;CR&gt;</span></code></pre></td></tr></table></div></figure>


<hr />

<p>vim就先折腾到这了。</p>

<p class='post-footer'>
            original link:<a href='http://812lcl.com/blog/2013/12/06/vimbu-quan-pei-zhi/'>http://812lcl.com/blog/2013/12/06/vimbu-quan-pei-zhi/</a><br/>&nbsp;written by <a href='http://812lcl.com'>812lcl</a>&nbsp;posted at <a href='http://812lcl.com'>http://812lcl.com</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[vim插件配置续]]></title>
    <link href="http://812lcl.com/blog/2013/12/04/vimcha-jian-pei-zhi-xu/"/>
    <updated>2013-12-04T20:56:00+08:00</updated>
    <id>http://812lcl.com/blog/2013/12/04/vimcha-jian-pei-zhi-xu</id>
    <content type="html"><![CDATA[<p>之前写过一篇<a href="http://812lcl.github.io/blog/2013/10/24/vimcha-jian-pei-zhi-%2Cbi-jian-ide/">文章</a>，介绍了当时用的一些vim插件，不过前些日子<a href="http://blog.jobbole.com/">伯乐在线</a>上的一篇文章，就又开始了我好几天的折腾，vim的折腾永无止境啊，有些大神配置文件竟然都写到了两千行，插件弄了几十个。我经过这第二阶段的折腾，最终定下来了两种方案，每种都是二十四五个插件的样子，一种是使用了YCM神级补全，另一种是采用clang-complete和neocomplcache补全的方案。YCM虽说是神级补全，但需要编译，而且体积庞大，有时候确实令人望而却步。有关不同的补全方案，我会另写一篇文章介绍，这里重要介绍一些我新增加的一些插件。</p>

<h2>1. <a href="https://github.com/tpope/vim-pathogen">pathogen</a></h2>

<p>首先，我改变了插件的管理方式，以前只用了十个左右的插件，没想去用插件管理插件，但也发现想删除某个插件或使用某个插件时很不方便，最后还是选用了一个管理插件的工具<code>pathogen</code>。它可以使所有插件具有独立的目录，互不干扰，想删谁删谁，添加也很简单。安装该插件方法如下</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd ~/.vim
</span><span class='line'>git clone git://github.com/tpope/vim-pathogen.git
</span><span class='line'>mkdir bundle</span></code></pre></td></tr></table></div></figure>


<p>然后再<code>.vimrc</code>中加入<code>execute pathogen#infect()</code>，这样就可以管理插件了。</p>

<!--more-->


<p>安装插件</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># git submodule add 插件GitHub仓库地址 bundle/插件文件夹
</span><span class='line'>git submodule add https://github.com/Lokaltog/vim-easymotion.git bundle/easymotion</span></code></pre></td></tr></table></div></figure>


<p>升级插件</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd ~/.vim/bundle/easymotion # 将 easymotion 替换为需要升级的插件名字
</span><span class='line'>git pull origin master</span></code></pre></td></tr></table></div></figure>


<p>升级所有插件</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd ~/.vim
</span><span class='line'>git submodule foreach git pull origin master</span></code></pre></td></tr></table></div></figure>


<p>删除插件</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd ~/.vim
</span><span class='line'>rm -rf bundle/easymotion
</span><span class='line'>git rm -rf bundle/easymotion</span></code></pre></td></tr></table></div></figure>


<p>如果你将你的<code>.vim</code>仓库穿到GitHub上，可以很容易的在其他机器上恢复相同的配置，方法如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone http://github.com/username/dotvim.git ~/.vim
</span><span class='line'>ln -s ~/.vim/vimrc ~/.vimrc
</span><span class='line'>cd ~/.vim
</span><span class='line'>git submodule init
</span><span class='line'>git submodule update</span></code></pre></td></tr></table></div></figure>


<p>如果你的整个<code>.vim</code>目录并不作为git仓库，也可以用pathogen管理插件，只需将插件下好，将其作为独立文件夹放入<code>~/.vim/bundle/</code>中即可。</p>

<h2>2. <a href="https://github.com/Lokaltog/vim-easymotion">Easymotion</a></h2>

<p>在vim原有功能中使用<code>f&lt;char&gt;</code>可以定位到一行中的某个字符，如fa可定位到本行光标后的第一个a字母，f2a则定位到第二个。但往往你并不知道要到的是第几个a，这时easymotion就是个很高效方便的插件了。只需敲击<leader><leader>fa，就可以定位光标之后的所有字母a（包括下边行内的a），所有的a都用字母代替，然后输入想跳到位置的字母即可。</p>

<p><leader><leader>是easymotion默认的引导键，可以自定义，我将其定义为“f”，所以定位时只需按ff<char>即可。easymotion还支持配合w、e、t位置移动操作，可以调到光标之后的第几个词尾、词头等。更改默认引导键只需在<code>.vimrc</code>中加入下面这条语句：</p>

<p><code>let g:EasyMotion_leader_key = 'f'</code></p>

<p><img src="http://812lcl.github.io/images/blog/easymotion.gif" alt="Easymotion" /></p>

<h2>3. <a href="https://github.com/tpope/vim-surround">surround</a></h2>

<p>这个插件可以轻松的在单词或句子外增加、删除或替换如括号、引号，甚至HTML标签，功能也十分好用，尤其写HTML时。主要使用就是增加<code>ys</code>、删除<code>ds</code>、替换<code>cs</code>，有不同的扩展，而且在normal、insert和visual模式下都可以操作。例子如下，其中|代表光标位置。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Text                 Command         New Text
</span><span class='line'>---------------       -------         -----------
</span><span class='line'>"Hello |world"        cs"'            'Hello world'
</span><span class='line'>"Hello |world"    cs"&lt;q&gt;            &lt;q&gt;Hello world&lt;/q&gt;
</span><span class='line'>(123+4|56)/2          cs)]            [123+456]/2
</span><span class='line'>(123+4|56)/2          cs)[            [ 123+456 ]/2
</span><span class='line'>&lt;div&gt;foo|&lt;/div&gt;       cst&lt;p&gt;            &lt;p&gt;foo&lt;/p&gt;
</span><span class='line'>fo|o!                 csw'            'foo'!
</span><span class='line'>fo|o!                 csW'            'foo!'</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Text                 Command         New Text
</span><span class='line'>---------------       -------         -----------
</span><span class='line'>Hello w|orld!         ysiw)           Hello (world)!
</span><span class='line'>Hello w|orld!         csw)            Hello (world)!
</span><span class='line'>fo|o              ysiwt&lt;html&gt;    &lt;html&gt;foo&lt;/html&gt;
</span><span class='line'>foo quu|x baz     yss"            "foo quux baz"
</span><span class='line'>foo quu|x baz     ySS"            "
</span><span class='line'>                                       foo quux baz
</span><span class='line'>                                      "</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Text                 Command         New Text
</span><span class='line'>---------------       -------         -----------
</span><span class='line'>"|hello"          ds"             hello</span></code></pre></td></tr></table></div></figure>


<p>在不同的模式下操作有所不同</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>normal模式
</span><span class='line'>ds    删除surrounding
</span><span class='line'>cs    替换surrounding
</span><span class='line'>ys    添加surrounding
</span><span class='line'>yS    添加、换行、缩进
</span><span class='line'>yss   整行添加surrounding
</span><span class='line'>ySs   整行添加换行缩进</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>visual模式
</span><span class='line'>s 添加surrounding
</span><span class='line'>S 添加、换行、缩进</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>insert模式
</span><span class='line'>&lt;C-s&gt;   添加surrounding
</span><span class='line'>&lt;C-s&gt;&lt;C-s&gt;    添加、换行、缩进</span></code></pre></td></tr></table></div></figure>


<h2>4. <a href="https://github.com/vim-scripts/matchit.zip">Matchit</a></h2>

<p>%跳转到下一个匹配符号如匹配括号，是 vim 原有功能，添加这个功能后，可以使用%跳转到匹配的HTML标签。</p>

<h2>5. <a href="https://github.com/mbbill/undotree">Undotree</a></h2>

<p>可视化撤销，可以看见你所做的改变，可视化的恢复到某一状态。<code>:UndotreeToggle</code>打开undo-tree面板，可以映射为其他按键，只需在<code>.vimrc</code>中添加</p>

<p><code>nmap &lt;silent&gt; &lt;Leader&gt;u :UndotreeToggle&lt;cr&gt;</code>。</p>

<p>打开的面板中还可以看到每一步修改的前后对比，在面板中按？可获得快捷键帮助。面板效果如下：</p>

<p><img src="https://github-camo.global.ssl.fastly.net/bcebe1b159a62ce1b010af4ba1e99e461116dd23/687474703a2f2f66696c65732e6d796f706572612e636f6d2f6d6262696c6c2f66696c65732f756e646f747265652e706e67" alt="Undotree" /></p>

<p>当前位置被标记为<code>&gt;seq&lt;</code></p>

<p>下一变化被标记为<code>{seq}</code>，可以通过<code>:redo</code>或 <code>&lt;ctrl-r&gt;</code>跳到下一状态</p>

<p>最近的变化标记为<code>[seq]</code></p>

<p>保存的变化被标记为s，最后被保存的变化被标记为大写S</p>

<p>vim 默认是不保存undo信息的，可以在<code>.vimrc</code>中添加语句实现退出编辑的文件，再打开仍可以undo。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>if has('persistent_undo')
</span><span class='line'>  set undofile
</span><span class='line'>    set undodir=’~/.undo/’
</span><span class='line'>endif</span></code></pre></td></tr></table></div></figure>


<h2>6. <a href="https://github.com/majutsushi/tagbar">Tagbar</a></h2>

<p>也是大名鼎鼎，同Taglist差不多，但更适合于C++，可以显示类中的声明、定义等等。<code>:TagbarToggle</code>打开Tagbar窗口，映射快捷键</p>

<p><code>nmap &lt;silent&gt; &lt;Leader&gt;t :TagbarToggle&lt;cr&gt;</code></p>

<h2>7. <a href="https://github.com/scrooloose/nerdtree">NERDTree</a></h2>

<p>这个是比系统原代的netrw更好用的file explorer，可以以树形显示文件结构，但和winmanager有冲突，无法像netrw一样和谐地整合到winmanager中。在nerdtree的窗口中按？可显示快捷键操作。</p>

<p><code>nmap &lt;silent&gt; &lt;Leader&gt;n :NERDTreeToggle&lt;CR&gt;</code>映射打开快捷键，根据自己喜欢设定。</p>

<h2>8. <a href="https://github.com/scrooloose/nerdcommenter">Nerdcommenter</a></h2>

<p>快速添加注释的插件，使用方法如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;Leader&gt;cc         最基本注释
</span><span class='line'>&lt;Leader&gt;cu      撤销注释
</span><span class='line'>&lt;Leader&gt;cm      多行注释
</span><span class='line'>&lt;Leader&gt;cs      性感的注释方式</span></code></pre></td></tr></table></div></figure>


<p>只列出了几个常用的，具体效果你可以自己一试。</p>

<h2>9. <a href="https://github.com/SirVer/ultisnips">Ultisnips</a></h2>

<p>需要python的支持，很强大的代码补全插件，大大提高编写代码的速度。可以自己定义模板，在该插件目录下的<code>UltiSnips</code>目录中有各种语言的补全模板。默认使用tab键补全，因为与ycm有冲突，重新映射为&lt;C-j>。</p>

<p><code>let g:UltiSnipsExpandTrigger = "&lt;c-j&gt;"</code></p>

<p>补全比如for循环的语句，可以通过&lt;c-j>切换更该要修改的参数。</p>

<h2>10. <a href="https://github.com/scrooloose/syntastic">Syntastic</a></h2>

<p>语法检查的插件，可以查看当前代码的错误，无需等到编译出错后再来修改。
<code>:Errors</code>打开错误列表，<code>:lnext</code>和<code>lpre</code>切换下一个和前一个错误。
在<code>.vimrc</code>中添加以下语句，对其进行配置及快捷键映射：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>let g:syntastic_che_on_open=1
</span><span class='line'>let g:syntastic_auto_jump=1
</span><span class='line'>let g:syntastic_error_symbol = 'e&gt;'
</span><span class='line'>let g:syntastic_warning_symbol = 'w&gt;'
</span><span class='line'>let g:syntastic_always_populate_loc_list=1
</span><span class='line'>let g:syntastic_loc_list_height = 6
</span><span class='line'>let g:syntastic_enable_highlighting = 0
</span><span class='line'>nmap &lt;Leader&gt;e :Errors&lt;cr&gt;
</span><span class='line'>nmap &lt;Leader&gt;c :lnext&lt;cr&gt;
</span><span class='line'>nmap &lt;Leader&gt;z :lpre&lt;cr&gt;</span></code></pre></td></tr></table></div></figure>


<p><img src="https://raw.github.com/scrooloose/syntastic/master/_assets/screenshot_1.png" alt="Syntastic" /></p>

<h2>11. <a href="https://github.com/xuhdev/SingleCompile">Singlecompile</a></h2>

<p>自动编译插件，支持多种语言的不同编译器，具体可查看<a href="http://www.topbug.net/SingleCompile/">相关主页</a>。<code>:SCCompileRun</code>编译并运行当前文件，<code>:SCCompile</code>仅编译，<code>:SCViewResult</code>查看运行结果，就在当前窗口中显示，十分方便。映射快捷键</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>nmap &lt;Leader&gt;g :SCCompileRun&lt;cr&gt;&lt;cr&gt;&lt;cr&gt;
</span><span class='line'>nmap &lt;Leader&gt;v :SCViewResult&lt;cr&gt;</span></code></pre></td></tr></table></div></figure>


<h2>12. <a href="https://github.com/airblade/vim-gitgutter">Gitgutter</a></h2>

<p><img src="https://raw.github.com/airblade/vim-gitgutter/master/screenshot.png" alt="Gitgutter" /></p>

<p>显示当前文件中与git仓库提交的版本的变化，在最左侧以不同符号显示不同状态。可以在<code>.vimrc</code>中自己定义</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>let g:gitgutter_enabled = 1
</span><span class='line'>let g:gitgutter_highlight_lines = 0
</span><span class='line'>" let g:gitgutter_sign_added = 'xx'
</span><span class='line'>" let g:gitgutter_sign_modified = 'yy'
</span><span class='line'>" let g:gitgutter_sign_removed = 'zz'
</span><span class='line'>" let g:gitgutter_sign_modified_removed = 'ww'
</span><span class='line'>nmap gh &lt;Plug&gt;GitGutterNextHunk
</span><span class='line'>nmap hg &lt;Plug&gt;GitGutterPrevHunk</span></code></pre></td></tr></table></div></figure>


<p>其中我定义了<code>gh</code>跳到下一条变化之处，<code>hg</code>跳到上一条。</p>

<h2>13. <a href="https://github.com/tpope/vim-fugitive">fugitive</a></h2>

<p>这个插件使你可以在vim中执行git操作。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>:Gstatus git status
</span><span class='line'>:Gcommit  git commit
</span><span class='line'>:Gdiff        git diff
</span><span class='line'>:Glog     git log
</span><span class='line'>:Gread        git checkout file
</span><span class='line'>:Gwrite       git add file
</span><span class='line'>:Gmove        git mv
</span><span class='line'>:Gremove  git rm</span></code></pre></td></tr></table></div></figure>


<h2>14. <a href="https://github.com/kien/ctrlp.vim">CtrlP</a></h2>

<p>快速查找file、buffer、mru、tag的插件，由&lt;c-p>快捷键呼出而得名，好像是sublime text2中的功能，很好用，有人就写了这么个插件，也确实很好用。</p>

<p><img src="https://github-camo.global.ssl.fastly.net/0a0b4c0d24a44d381cbad420ecb285abc2aaa4cb/687474703a2f2f692e696d6775722e636f6d2f7949796e722e706e67" alt="CtrlP" /></p>

<p>ctrl-p打开搜索框后即可搜索，有以下功能键：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;c-f&gt; &lt;c-b&gt;      切换模式
</span><span class='line'>&lt;c-d&gt;           切换按全路径或文件名查找
</span><span class='line'>&lt;c-r&gt;           改变regexp模式
</span><span class='line'>&lt;c-j&gt; &lt;c-k&gt;       下一个/上一个文件
</span><span class='line'>&lt;c-t&gt;           新tab打开文件
</span><span class='line'>&lt;c-v&gt; &lt;c-x&gt;       新split打开文件
</span><span class='line'>&lt;c-n&gt; &lt;c-p&gt;       上一个或下一个查找
</span><span class='line'>&lt;c-y&gt;           创建新文件和他的父目录
</span><span class='line'>&lt;c-z&gt;           标记文件
</span><span class='line'>&lt;c-o&gt;           打开标记文件</span></code></pre></td></tr></table></div></figure>


<p>可以在<code>.vimrc</code>中配置CtrlP显示的位置，显示条目，忽略搜索目录等等,就不一一说明了，可以点击<a href="http://kien.github.io/ctrlp.vim/">这里</a>查看。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>我的配置
</span><span class='line'>let g:ctrlp_map = '&lt;c-p&gt;'
</span><span class='line'>let g:ctrlp_cmd = 'CtrlP'
</span><span class='line'>let g:ctrlp_open_multiple_files = 'v'         " &lt;C-Z&gt;&lt;C-O&gt;时垂直分屏打开多个文件
</span><span class='line'>set wildignore+=*/tmp/*,*.so,*.swp,*.zip
</span><span class='line'>let g:ctrlp_custom_ignore = {
</span><span class='line'>  \ 'dir':  '\v[\/]\.(git)$',
</span><span class='line'>  \ 'file': '\v\.(log|jpg|png|jpeg)$',
</span><span class='line'>  \ }
</span><span class='line'>let g:ctrlp_working_path_mode= 'ra'
</span><span class='line'>let g:ctrlp_match_window_bottom= 1
</span><span class='line'>let g:ctrlp_max_height= 10
</span><span class='line'>let g:ctrlp_match_window_reversed=0
</span><span class='line'>let g:ctrlp_mruf_max=500
</span><span class='line'>let g:ctrlp_follow_symlinks=1</span></code></pre></td></tr></table></div></figure>


<h2>15. <a href="https://github.com/Shougo/unite.vim">unite</a></h2>

<p>和CtrlP功能类似，也可以搜索文件、缓冲区等，我使用这个插件主要是它可以查询当前vim中的所有命令和按键映射等，命令多了，一时记不住可以查查看，很方便。</p>

<p>如果你在Unite窗口进入插入模式，光标将会移到该窗口的最上方，并显示“>”提示符。输入字符会搜索该列表&mdash;这里和FuzzyFinder相似。和常规vim一样，按<ESC>键可以退出插入模式回到命令模式，而且可以使用通配符*、|、!。</p>

<p>命令模式和插入模式都有相应的快捷键映射。比如在命令模式下，当光标在一个文件上，按下a，Unite会显示一个可以操作该文件命令的列表。这个命令列表被称为actions，这个列表可以像Unite其他部分一样被搜索和调用。</p>

<p>actions可以组合通配符。如果输入:Unite file, 然后按下*将会标记所有文件，再输入a将会列出所有actions，最后选择above，Unite将会打开所有被标记的文件。</p>

<p>可以映射快捷键调用，根据自己喜好，自行定义</p>

<p><code>nnoremap &lt;leader&gt;f :Unite -start-insert file</code></p>

<p><img src="https://s3.amazonaws.com/github-csexton/unite-01.gif" alt="unite" /></p>

<h2>16. <a href="https://github.com/Raimondi/delimitMate">delimitmate</a></h2>

<p>这个插件有人很讨厌，也有一些人会喜欢，我也还在试用，习惯。它能自动添加和删除匹配的括号、引号。大家选择性安装吧。</p>

<p>OK，先这么多了，准备下一篇文章写一下vim中各种强大的补全。而且提醒一下，vim本身功能已经很强大，虽然各种插件可以帮助你更高效，但不要离了他们就不会使用vim了，也不要太专注于各种插件，写的内容才是最主要的。推荐一篇文章<a href="http://www.kunli.info/2013/08/13/vim/">不要复杂化vim</a>。</p>

<p class='post-footer'>
            original link:<a href='http://812lcl.com/blog/2013/12/04/vimcha-jian-pei-zhi-xu/'>http://812lcl.com/blog/2013/12/04/vimcha-jian-pei-zhi-xu/</a><br/>&nbsp;written by <a href='http://812lcl.com'>812lcl</a>&nbsp;posted at <a href='http://812lcl.com'>http://812lcl.com</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress添加统计与SEO]]></title>
    <link href="http://812lcl.com/blog/2013/10/29/octopresstian-jia-tong-ji-yu-seo/"/>
    <updated>2013-10-29T19:28:00+08:00</updated>
    <id>http://812lcl.com/blog/2013/10/29/octopresstian-jia-tong-ji-yu-seo</id>
    <content type="html"><![CDATA[<p>博客建好了，文章写出来，当然希望有人能看到，而且希望更多的人看到，这就需要让自己的博客可以在搜索引擎里面检索到，自己搭建的博客不像在CSDN、博客园写的文章，因为你的博客还没有被提交到搜索引擎，让它来抓取你，所以首先要到各个搜索引擎提交自己的博客地址。</p>

<p><a href="http://urlc.cn/tool/addurl.html">http://urlc.cn/tool/addurl.html</a></p>

<p><a href="http://tool.lusongsong.com/addurl.html">http://tool.lusongsong.com/addurl.html</a></p>

<p>提交到搜索引擎了，能搜索到你的文章了，你还需要做的是为你的网站、文章添加描述信息、关键字，来帮助用户准确的搜索到你的文章。关键字和描述是指网页head部分的元标签meta，是给搜索引擎看的，以此希望用户可以比较容易找到。</p>

<!-- more -->


<p>首先为你的每篇文章添加描述和关键字，本文的文件头如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>---
</span><span class='line'>layout: post
</span><span class='line'>title: "Octopress添加统计与SEO"
</span><span class='line'>date: 2013-10-29 22:37
</span><span class='line'>comments: true
</span><span class='line'>categories: Octopress
</span><span class='line'>tags: [octopress, 博客, SEO]
</span><span class='line'>keywords: seo, octopress, analytics, 站内搜索
</span><span class='line'>description: 为Octopress添加统计工具及SEO技巧
</span><span class='line'>---</span></code></pre></td></tr></table></div></figure>


<p>这样就可以为你的文章添加关键字和描述，使搜索引擎更容易搜到你的文章。你还可以
为你的博客首页添加描述和关键字，在<code>source/index.html</code>文件顶部添加即可，方法
如上。</p>

<p>如果你没有为文章添加描述，octopress会自动以文章的前150个字符作为描述，以为
每一篇文章都添加描述，octopress模板实现以上功能的代码在<code>source/_includes/head.html</code>中：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{% capture description %}{% if page.description %}{{ page.description }}{% else %}{{ content | raw_content }}{% endif %}{% endcapture %}
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;description&quot;</span> <span class="na">content=</span><span class="s">&quot;{{ description | strip_html | condense_spaces | truncate:150 }}&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>{% if page.keywords %}<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;keywords&quot;</span> <span class="na">content=</span><span class="s">&quot;{{ page.keywords }}&quot;</span><span class="nt">&gt;</span>{% endif %}
</span></code></pre></td></tr></table></div></figure>


<p>此外，也可以在<code>_config.yml</code>里添加默认的<code>description</code>和<code>keywords</code>。</p>

<h2>统计工具</h2>

<p>octopress模板里面默认带了Google Analytics工具，只需要注册<a href="http://www.google.com/analytics/">Google Analytics</a>，
获得一个google_analytics_tracking_id，添加到<code>_config.yml</code>中对应位置，并对网站进行验证即可。然后可以通过Google Analytics分析网站的流量了。而且可以使用<a href="https://www.google.com/webmasters/tools/home?hl=zh-CN">Google站长工具</a>，对网站进行更全面的分析，进行SEO。</p>

<p>对自己的网站进行验证，只需将网站提供的用于验证的代码添加到<code>source/_includes/head.html</code>的<code>&lt;head&gt;</code>标签之间，网站部署到网上后，过几分钟即可验证通过，其他需要验证的也同样操作。</p>

<p>除了Google的统计工具，还有就是国内使用很广的<a href="http://zhanzhang.cnzz.com/">CNZZ</a>了，注册后，添加并验证你的网站就可以添加统计代码了，选好自己喜欢的样式，获得代码，可添加到<code>source/_includes/custom/footer.html</code>中。即可查看每天你的博客的流量，进行相应的优化了。</p>

<p>最后还要提的就是<a href="http://zhanzhang.baidu.com/site/index">百度站长工具</a>和<a href="http://tongji.baidu.com/web/welcome/login">百度统计了</a>，方法和CNZZ方法类似，统计代码也可以添加到<code>source/_includes/custom/footer.html</code>中。但是我发现似乎百度统计并不太准确，并且百度很难搜的到我的博客。</p>

<p>我的统计代码添加如下，包括百度统计和CNZZ：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;p&gt;</span>
</span><span class='line'>  Copyright <span class="ni">&amp;copy;</span> {{ site.time | date: &quot;%Y&quot; }} - {{ site.author }} -
</span><span class='line'>  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;credit&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          Powered by
</span><span class='line'>          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://octopress.org&quot;</span><span class="nt">&gt;</span>Octopress<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">_bdhmProtocol</span> <span class="o">=</span> <span class="p">((</span><span class="s2">&quot;https:&quot;</span> <span class="o">==</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">protocol</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot; https://&quot;</span> <span class="o">:</span> <span class="s2">&quot; http://&quot;</span><span class="p">);</span>
</span><span class='line'>        <span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">unescape</span><span class="p">(</span><span class="s2">&quot;%3Cscript src=&#39;&quot;</span> <span class="o">+</span> <span class="nx">_bdhmProtocol</span> <span class="o">+</span> <span class="s2">&quot;hm.baidu.com/h.js%3F25fb42e16458b238f8da9ba05d6b9d4d&#39; type=&#39;text/javascript&#39;%3E%3C/script%3E&quot;</span><span class="p">));</span>
</span><span class='line'>  <span class="nt">&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span><span class="kd">var</span> <span class="nx">cnzz_protocol</span> <span class="o">=</span> <span class="p">((</span><span class="s2">&quot;https:&quot;</span> <span class="o">==</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">protocol</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot; https://&quot;</span> <span class="o">:</span> <span class="s2">&quot; http://&quot;</span><span class="p">);</span><span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">unescape</span><span class="p">(</span><span class="s2">&quot;%3Cspan id=&#39;cnzz_stat_icon_1000106316&#39;%3E%3C/span%3E%3Cscript src=&#39;&quot;</span> <span class="o">+</span> <span class="nx">cnzz_protocol</span> <span class="o">+</span> <span class="s2">&quot;s22.cnzz.com/z_stat.php%3Fid%3D1000106316%26show%3Dpic&#39; type=&#39;text/javascript&#39;%3E%3C/script%3E&quot;</span><span class="p">));</span><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;/p&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>摘要和语法高亮</h2>

<p>如果想让文章在首页只显示一部分，只需要在文章中相应的位置添加<code>&lt;!-- more --&gt;</code>即可，在<code>_config.yml</code>中修改<code>excerpt_link: "继续阅读 &amp;rarr;"</code>来修改继续阅读按钮的显示内容。</p>

<p>octopress自带了语法高亮功能，使用的是<code>pygements.rb</code>，使用方法见<a href="http://octopress.org/docs/plugins/backtick-codeblock/">Backtick Code Blocks</a>，支持的语言见<a href="http://pygments.org/docs/lexers/">Supported languages</a>。</p>

<p>其他方法见<a href="http://octopress.org/docs/plugins/include-code/">embed code from a file</a>、<a href="http://octopress.org/docs/plugins/gist-tag/">embed GitHub gists</a>或<a href="http://xiongbupt.github.io/blog/2012/06/08/octopressdai-ma-gao-liang/">Octopress代码高亮</a>。</p>

<h2>站内搜索</h2>

<p>最后，还有一点我想实现但却始终没实现了的功能，就是站内搜索。octopress自带了google的搜索，在搜索栏中搜索后，相当于在google中指定搜索域为你的博客进行搜索，然后跳到Google页面，虽然能搜到你博客中的相关内容，但是作为有强迫症的我认为这和整个博客风格不太符。我想实现的效果是如<a href="http://yortz.it/about">这个博客</a>所实现的站内搜索一样。这就需要使用<a href="https://github.com/yortz/octopress-lunr-js-search">Octopress Lunr.js plugin</a>，但我安装安装方法试验了好几次，还是没有成功。</p>

<p>如果谁安装成功了，还希望指点我一下。</p>

<hr />

<p>好了，关于octopress也写了好几篇文章了，主要想记录一下自己搭建博客的过程，怕自己忘掉，以后再搭还要从头再来。也是刚开始写博客，需要练习的过程，开始虽然写的不好，但坚持下来总是会有收获的。</p>

<p>参考文章：</p>

<ul>
<li><p><a href="http://codemacro.com/2012/09/06/octopress-seo/">Octopress中的SEO</a></p></li>
<li><p><a href="http://www.cnblogs.com/hswg/archive/2013/01/15/2860952.html">Octopress技巧之设置关键字和描述</a></p></li>
</ul>


<p class='post-footer'>
            original link:<a href='http://812lcl.com/blog/2013/10/29/octopresstian-jia-tong-ji-yu-seo/'>http://812lcl.com/blog/2013/10/29/octopresstian-jia-tong-ji-yu-seo/</a><br/>&nbsp;written by <a href='http://812lcl.com'>812lcl</a>&nbsp;posted at <a href='http://812lcl.com'>http://812lcl.com</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress主题样式修改]]></title>
    <link href="http://812lcl.com/blog/2013/10/27/octopresszhu-ti-yang-shi-xiu-gai/"/>
    <updated>2013-10-27T11:52:00+08:00</updated>
    <id>http://812lcl.com/blog/2013/10/27/octopresszhu-ti-yang-shi-xiu-gai</id>
    <content type="html"><![CDATA[<p><a href="http://812lcl.github.io/blog/2013/10/26/octopressce-bian-lan-ji-ping-lun-xi-tong-ding-zhi/">上一篇文章</a>写了很多侧边栏和社会化评论分享系统的定制，现在说一说，主题样式的修改。</p>

<h2>1. Header，Navigation，footer</h2>

<p>这几个部分是经常需要个性化定制的，在<code>source/_includes</code>中存在其对应的HTML文件，这是主题默认的文件，更换主题，更新octopress会被覆盖，所以应该编辑<code>source/_includes/custom</code>下的文件来实现修改。</p>

<h3>1.1 Header（标题栏）</h3>

<p>标题栏显示的内容为<code>/source/_includes/custom/header.html</code>所实现的，其中title和subtitle在<code>_config.yml</code>中定义，你可以进行适量的修改：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;hgroup&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ root_url }}/&quot;</span><span class="nt">&gt;</span>{{ site.title }}<span class="nt">&lt;/a&gt;&lt;/h1&gt;</span>
</span><span class='line'>  {% if site.subtitle %}
</span><span class='line'>    <span class="nt">&lt;h2&gt;</span>{{ site.subtitle }}<span class="nt">&lt;/h2&gt;</span>
</span><span class='line'>  {% endif %}
</span><span class='line'><span class="nt">&lt;/hgroup&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<!--more-->


<h3>1.2 Navigation（导航栏）</h3>

<p>可以自行为导航栏添加项目，链接至不同的页面，在<code>/source/_includes/custom/navigation.html</code>中编辑即可。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;main-navigation&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ root_url }}/&quot;</span><span class="nt">&gt;</span>博客主页<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ root_url }}/blog/archives&quot;</span><span class="nt">&gt;</span>文章列表<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ root_url }}/category-cloud&quot;</span><span class="nt">&gt;</span>分类云<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ root_url }}/about&quot;</span><span class="nt">&gt;</span>关于<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>当想添加一些页面，如“关于”页面，可以试验<code>rake new_page['name']</code>命令来创建，如<code>rake new_page['about']</code>后，会建立<code>source/about/index.html</code>文件，在此文件编辑，添加自己想要展示的内容，然后再<code>navigation.html</code>里添加正确的路径即可，如<code>&lt;li&gt;&lt;a href="http://812lcl.com/about"&gt;关于&lt;/a&gt;&lt;/li&gt;</code>。</p>

<h3>1.3 footer（尾栏）</h3>

<p>在<code>source/_includes/custom/footer.html</code>中编辑尾栏：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;p&gt;</span>
</span><span class='line'>  Copyright <span class="ni">&amp;copy;</span> {{ site.time | date: &quot;%Y&quot; }} - {{ site.author }} -
</span><span class='line'>  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;credit&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          Powered by
</span><span class='line'>          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://octopress.org&quot;</span><span class="nt">&gt;</span>Octopress<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/span&gt;</span>
</span><span class='line'><span class="nt">&lt;/p&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>默认显示<code>Copyright@2013 - author - Powered by Octopress</code>，你可以添加自己想显示在尾栏的东西，第三方统计流量统计工具也可以添加到这，如CNZZ、Google analytics和百度统计等，使用这些工具可以更详细的分析网站流量，改善引流措施，完善网站，具体添加方法见<a href="http://812lcl.com/blog/2013/10/29/octopresstian-jia-tong-ji-yu-seo">统计工具与SEO</a>。</p>

<h2>2. 样式修改</h2>

<p>添加或修改控制样式，需编辑<code>sass/custom/_styles.scss</code>，博客的所有颜色控制在<code>/sass/base/_theme.scss</code>中进行设置。定制自己的配色，编辑<code>sass/custom/_colors.scss</code>。查看<a href="http://hslpicker.com/#e1ff00">HSL COLOR PICKER</a>，帮你挑选喜欢的颜色。</p>

<p>修改布局，需要编辑<code>sass/base/_layout.scss</code>，可以修改各部分的宽度等。</p>

<h3>2.1 添加背景图片</h3>

<p>在<code>sass/custom/_styles.scss</code>中添加：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="nt">html</span> <span class="p">{</span>
</span><span class='line'>        <span class="na">background</span><span class="o">:</span> <span class="mh">#555555</span> <span class="sx">url(&quot;/images/bg3.jpg&quot;)</span><span class="p">;</span>
</span><span class='line'>        <span class="c1">//background: #555555;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nt">body</span> <span class="o">&gt;</span> <span class="nt">div</span> <span class="p">{</span>
</span><span class='line'>        <span class="na">background-image</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
</span><span class='line'>        <span class="c1">//background: #F5F5D5</span>
</span><span class='line'><span class="p">}</span> <span class="c1">//侧边栏</span>
</span><span class='line'>
</span><span class='line'><span class="nt">body</span> <span class="o">&gt;</span> <span class="nt">div</span> <span class="o">&gt;</span> <span class="nt">div</span> <span class="p">{</span> <span class="c1">//文章内容</span>
</span><span class='line'>        <span class="na">background-image</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
</span><span class='line'>        <span class="c1">//background: #F5F5D5; </span>
</span><span class='line'>        <span class="c1">//background: url(&quot;/images/bg.jpg&quot;);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>将背景图片放入<code>source/images/</code>中，修改上述代码中的路径指向想要的图片，即可
更改博客、侧边栏或文章的背景图片。博客使用背景图片后，与Header区不太和谐，
所以我在<code>/sass/base/_theme.scss</code>中将<code>header-bg</code>设置成透明色了。</p>

<h3>2.2 LOGO图片</h3>

<p>我所说的logo图片有两种，一个是打开一个网页时，标签栏上显示的小图片。还有一个是标题栏主标题旁的图片。</p>

<p>首先针对于第一种可以选择你喜欢的图片（大小适中），替换<code>source</code>目录下的<code>favicon.png</code>即可。</p>

<p>或者将logo图片放入<code>source/images</code>中，然后修改<code>source/_includes/head.html</code>，找到<code>favicon.png</code>，修改其路径指向你的图片即可。</p>

<p>对于主标题旁的图片需要在<code>sass/custom/_styles.scss</code>中填入如下语句：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="c1">//Blog logo pic</span>
</span><span class='line'><span class="k">@media</span> <span class="nt">only</span> <span class="nt">screen</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">min-width</span><span class="nd">:</span> <span class="nt">550px</span><span class="o">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="nt">body</span> <span class="o">&gt;</span> <span class="nt">header</span> <span class="nt">h1</span><span class="p">{</span>
</span><span class='line'>                <span class="na">background</span><span class="o">:</span> <span class="sx">url(&quot;/images/logo1.png&quot;)</span> <span class="no">no-repeat</span> <span class="mi">0</span> <span class="mi">1</span><span class="kt">px</span><span class="p">;</span>
</span><span class='line'>                <span class="na">padding-left</span><span class="o">:</span> <span class="mi">65</span><span class="kt">px</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="nt">body</span> <span class="o">&gt;</span> <span class="nt">header</span> <span class="nt">h2</span> <span class="p">{</span> <span class="na">padding-left</span><span class="o">:</span> <span class="mi">65</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>根据自己情况进行修改即可。</p>

<h3>2.3 导航栏倒圆角</h3>

<p>我设置的header区背景色透明，所以导航栏的直角有些尖锐，在<code>sass/custom/_styles.scss</code>中添加如下语句，将其修改为圆角：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="c1">//倒圆角</span>
</span><span class='line'><span class="k">@media</span> <span class="nt">only</span> <span class="nt">screen</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">min-width</span><span class="nd">:</span> <span class="nt">1040px</span><span class="o">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nt">body</span> <span class="o">&gt;</span> <span class="nt">nav</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">@include</span><span class="nd"> border-top-radius</span><span class="p">(</span><span class="mf">.4</span><span class="kt">em</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="nt">body</span> <span class="o">&gt;</span> <span class="nt">footer</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">@include</span><span class="nd"> border-bottom-radius</span><span class="p">(</span><span class="mf">.4</span><span class="kt">em</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>3. 滑动返回顶部按钮</h2>

<p>当文章较长，通常希望有一个返回顶部的按钮，如下方法实现了在页面右下方添加一个返回顶部的图片按钮，点击后可以滑动的返回顶部。</p>

<p>首先创建<code>source/javascripts/top.js</code>，实现滑动返回顶部效果，添加如下代码：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">goTop</span><span class="p">(</span><span class="nx">acceleration</span><span class="p">,</span> <span class="nx">time</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>        <span class="nx">acceleration</span> <span class="o">=</span> <span class="nx">acceleration</span> <span class="o">||</span> <span class="mf">0.1</span><span class="p">;</span>
</span><span class='line'>        <span class="nx">time</span> <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="mi">16</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">x1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">y1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">x2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">y2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">x3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">y3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">)</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>                <span class="nx">x1</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>                <span class="nx">y1</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>                <span class="nx">x2</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>                <span class="nx">y2</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">x3</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">scrollX</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">y3</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">scrollY</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">x2</span><span class="p">,</span> <span class="nx">x3</span><span class="p">));</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">y1</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">y2</span><span class="p">,</span> <span class="nx">y3</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">speed</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="nx">acceleration</span><span class="p">;</span>
</span><span class='line'>        <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x</span> <span class="o">/</span> <span class="nx">speed</span><span class="p">),</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">y</span> <span class="o">/</span> <span class="nx">speed</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span><span class="p">(</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>                <span class="kd">var</span> <span class="nx">invokeFunction</span> <span class="o">=</span> <span class="s2">&quot;goTop(&quot;</span> <span class="o">+</span> <span class="nx">acceleration</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="nx">time</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
</span><span class='line'>                <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">invokeFunction</span><span class="p">,</span> <span class="nx">time</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>然后创建<code>source/_includes/custom/totop.html</code>，设置返回顶部按钮样式和位置，代码如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!--返回顶部开始--&gt;</span>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;full&quot;</span> <span class="na">style=</span><span class="s">&quot;width:0px; height:0px; position:fixed; right:180px; bottom:150px; z-index:100; text-align:center; background-color:transparent; cursor:pointer;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">onclick=</span><span class="s">&quot;goTop();return false;&quot;</span><span class="nt">&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;/images/top.png&quot;</span> <span class="na">border=</span><span class="s">0</span> <span class="na">alt=</span><span class="s">&quot;返回顶部&quot;</span><span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;/javascripts/top.js&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="c">&lt;!--返回顶部结束--&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>最后，还需要将返回顶部的图片放入<code>source/images</code>，命名为<code>top.png</code>（或修改totop.html中图片的路径）。</p>

<h2>4. 二维码展示</h2>

<p>在关于页面或边栏可以展示你的个人博客的二维码，方便移动终端扫描访问你的博客，插件主页<a href="https://github.com/sailor79/Octopress-dynamic-QR-Code-aside">点击这里</a>。</p>

<p>在侧边栏显示，则将<code>qrcode.html</code>放入<code>source/_includes/custom/asides/</code>中，在<code>_config.yml</code>中<code>default_asides</code>添加<code>custom/asides/qrcode.html</code>即可显示。</p>

<p>或者将<code>qrcode.html</code>代码添加到你想展示的页面的HTML文件中亦可。</p>

<hr />

<p>参考文章：</p>

<ul>
<li><p><a href="http://yanping.me/cn/blog/2012/01/07/theming-and-customization/">为Octopress修改主题和自定义样式</a></p></li>
<li><p><a href="http://shanewfx.github.io/blog/2012/08/13/improve-blog-theme/">Octopress主题改造</a></p></li>
<li><p><a href="http://www.neoease.com/javascript-go-top/">用 JavaScript 实现变速回到顶部</a></p></li>
</ul>


<p class='post-footer'>
            original link:<a href='http://812lcl.com/blog/2013/10/27/octopresszhu-ti-yang-shi-xiu-gai/'>http://812lcl.com/blog/2013/10/27/octopresszhu-ti-yang-shi-xiu-gai/</a><br/>&nbsp;written by <a href='http://812lcl.com'>812lcl</a>&nbsp;posted at <a href='http://812lcl.com'>http://812lcl.com</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress侧边栏及评论系统定制]]></title>
    <link href="http://812lcl.com/blog/2013/10/26/octopressce-bian-lan-ji-ping-lun-xi-tong-ding-zhi/"/>
    <updated>2013-10-26T22:36:00+08:00</updated>
    <id>http://812lcl.com/blog/2013/10/26/octopressce-bian-lan-ji-ping-lun-xi-tong-ding-zhi</id>
    <content type="html"><![CDATA[<p>在<a href="http://812lcl.github.io/blog/2013/10/25/octopressbo-ke-da-jian-ji-mu-lu-jie-gou/">上一篇文章</a>中，已经搭建起了octopress博客。使用的是默认的主题，样式千篇一律，而且自带的一些功能和侧边栏并不适合国内的国情，得不到网络的支持，如facebook、twitter、google plus和disqus等。所以还是有必要进行一下改造，打造中国特色octopress博客的。</p>

<h2>1. 第三方主题</h2>

<p>首先，你先要选定的是博客使用的第三方主题，因为如果你已经进行了很多的网页设置，添加了很多的插件，再来改主题，你就要面临悲剧了，你会发现你已经配置好的东西被替换掉了，这无疑会对你的热情带来打击。所以我们先来看看第三方主题。</p>

<p>你需要先找到自己喜欢的主题，之后可以在此主题上进行修改。<a href="http://opthemes.com/">点击这里</a>是一个主题网站，给出了不同主题的预览图，使用该主题的博客和该主题的GitHub链接。选中你想要的，获得GitHub仓库地址，如下安装</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd blog
</span><span class='line'>$ git clone https://github.com/shashankmehta/greyshade.git ./themes/greyshade
</span><span class='line'>$ rake install['greyshade']
</span><span class='line'>$ rake generate</span></code></pre></td></tr></table></div></figure>


<p>这里我的博客在blog文件夹中，以安装greyshade主题为例。你按照自己的情况进行更改。<code>rake generate</code>后可以通过<code>rake preview</code>访问<code>http://localhost:4000</code>预览新的主题样式，不满意可以更换其他主题。</p>

<!--more-->


<h2>2. 侧边栏</h2>

<p>侧边栏可以添加的插件很多，新浪微博、豆瓣等很多网站都有相应的插件，也可以到<a href="https://github.com/imathis/octopress/wiki">octopress的wiki页面</a>寻找。</p>

<p>侧边栏在<code>_config.yml</code>中设置，添加进<code>default_asides</code>中，先后顺序代表显示的先后顺序，各个侧边栏插件代码放入相应的位置即可，自己添加的一般放入<code>source/_includes/custom/asides</code>，<code>default_asides</code>中默认从<code>_includes</code>之后路径开始写。</p>

<h3>2.1 最新文章</h3>

<p>首先说一下主题中可用的插件。</p>

<p><code>asides/recent_posts.html</code>是最近写的文章的一个展示，添加到<code>default_asides</code>中即可显示，在<code>_config.yml</code>中可以设置显示最近多少篇文章，<code>recent_posts: 5</code>，注意冒号后有空格。</p>

<h3>2.2 GitHub Repos</h3>

<p><code>asides/github.html</code>则是GitHub repos的一个展示，可以直接到达你的GitHub页面，在<code>_config.yml</code>中设置你的Github账号，并设置为<code>true</code>即可，如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Github repositories
</span><span class='line'>github_user: 812lcl   #我的github
</span><span class='line'>github_repo_count: 0
</span><span class='line'>github_show_profile_link: true
</span><span class='line'>github_skip_forks: true</span></code></pre></td></tr></table></div></figure>


<h3>2.3 微博秀</h3>

<p>新浪微博是一个信息传播非常迅速的媒介，如果你热衷于微博，可以在侧边栏添加自己的微博秀。首先需要获得自己的微博秀代码，链接为<a href="http://app.weibo.com/tool/weiboshow">http://app.weibo.com/tool/weiboshow</a>，进行相应的设置即可获得微博秀代码。</p>

<p>然后在<code>source/_includes/custom/asides</code>创建weibo.html，添加如下代码，刚刚获得的微博秀代码也要添加到相应位置：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>    <span class="nt">&lt;h1&gt;</span>新浪微博<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>    <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;weibo&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;li&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">&lt;!-- 在此插入获得的微博秀代码 --&gt;</span>
</span><span class='line'>
</span><span class='line'>      <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>最后在<code>default_asides</code>中加入<code>custom/asides/weibo.html</code>即可显示你的微博秀了。</p>

<h3>2.4 豆瓣展示</h3>

<p>你可以通过豆瓣读书、豆瓣电影、豆瓣音乐等多方面展示你自己，豆瓣也提供了类似微博秀的展示方式，添加方法也类似。获得豆瓣收藏秀的链接<a href="http://www.douban.com/service/badgemakerjs">http://www.douban.com/service/badgemakerjs</a>，根据自己的喜欢进行设置</p>

<p>然后在<code>source/_includes/custom/asides</code>创建douban.html，添加如下代码，刚刚获得的代码添加到<code>&lt;div&gt;</code>之间：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>My Douban<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div&gt;</span>
</span><span class='line'>  <span class="c">&lt;!--添加到这--&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>最后在<code>default_asides</code>中加入<code>custom/asides/douban.html</code>显示你的豆瓣展示。</p>

<h3>2.5 访客地图</h3>

<p>效果如我的博客右侧那个精美的3D旋转地球所示，它可以显示访客数量，访客来自的地域，既有装饰作用，又有统计作用。它也有2D效果版，可以根据自己喜欢进行设置，地址在<a href="http://www.revolvermaps.com/?target=setup">这里</a>，然后获得代码。</p>

<p>依然在<code>source/_includes/custom/asides</code>创建earth.html，代码如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>访客地图<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  <span class="c">&lt;!--获得代码添加到这--&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>在<code>default_asides</code>中加入<code>custom/asides/earth.html</code>显示你定制的访客地图。</p>

<h3>2.6 酷站博客</h3>

<p>你有一些经常去的网站、博客，想推荐给大家，则可以在侧边栏加上一个“酷站博客”，当然名字你自己取即可。</p>

<p>在<code>source/_includes/custom/asides</code>创建blog_link.html，代码如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'><span class="nt">&lt;h1&gt;</span>酷站博客<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'><span class="nt">&lt;ul&gt;</span>
</span><span class='line'>        <span class="nt">&lt;li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://blog.jobbole.com/&quot;</span><span class="nt">&gt;</span>伯乐在线<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.csdn.net/&quot;</span><span class="nt">&gt;</span>CSDN<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.cnblogs.com/&quot;</span><span class="nt">&gt;</span>博客园<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://coolshell.cn/&quot;</span><span class="nt">&gt;</span>酷壳CoolShell<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.cnblogs.com/Solstice/&quot;</span><span class="nt">&gt;</span>陈硕<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>可以自行添加喜爱网站，然后在<code>default_asides</code>中加入<code>custom/asides/blog_link.html</code>。</p>

<p>看到这，你应该很熟悉添加侧边栏的流程了吧。</p>

<h3>2.7 最热文章</h3>

<p>Octopress Popular Posts Plugin是根据Google page rank计算，展示出权值最高的文章，插件的项目主页为<a href="https://github.com/octopress-themes/popular-posts">点击这里</a>。</p>

<p>这个插件的安装与之前的方法不同，首先在<code>Gemfile</code>中添加</p>

<pre><code>gem 'octopress-popular-posts'
</code></pre>

<p><code>Gemfile</code>中的是bundle安装时安装的所有依赖的软件，然后用bundle安装</p>

<pre><code>bundle install
</code></pre>

<p>执行命令，将插件拷贝到你的source目录，如下：</p>

<pre><code>bundle exec octopress-popular-posts install
</code></pre>

<p>到这就安装完了，可以设置显示了，在<code>_config.yml</code>中设置，增加下面一行：</p>

<pre><code>popular_posts_count: 5      # Posts in the sidebar Popular Posts section
</code></pre>

<p>设置边栏显示文章数，最后在<code>default_asides</code>中添加<code>custom/asides/popular_posts.html</code>，即可显示出来。</p>

<p>这样就设置好了，同时建议将缓存的page rank文件添加进你的<code>.gitignore</code>中</p>

<pre><code>.page_rank
</code></pre>

<h3>2.8 3D标签云与标签列表</h3>

<p>octopress默认的只支持category的分类，而并没有tag。category和tag分别代表有序/无序的知识点归纳。一篇文章只能属于一个category，但可以有多个tag。原来的plugin下只有category_generator.rb插件，实现category功能，在github上有两个插件帮助实现了tag生成和tag cloud功能<a href="https://github.com/robbyedwards/octopress-tag-pages">插件1</a>，<a href="https://github.com/robbyedwards/octopress-tag-cloud">插件2</a>。但似乎并不支持中文，而category_generator.rb是支持中文的，所以我有样学样，改成了支持中文的，并且实现了3D标签云的，插件已经上传到<a href="https://github.com/812lcl/category_tag">github</a>。clone到你博客的目录即可。</p>

<p>包含文件如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'> ├─ plugins/
</span><span class='line'>    │  ├─ category_generator.rb
</span><span class='line'>    │  ├─ category_list.rb
</span><span class='line'>    │  ├─ category_tag_cloud.rb
</span><span class='line'>    │  ├─ tag_generator.rb
</span><span class='line'>    │  └─ tag_list.rb
</span><span class='line'>    └─ source/
</span><span class='line'>       └─ _includes/
</span><span class='line'>          └─ custom/
</span><span class='line'>             └─ asides/
</span><span class='line'>                ├─ category_cloud.html
</span><span class='line'>                ├─ category_list.html
</span><span class='line'>                ├─ tag_cloud.html
</span><span class='line'>                └─ tag_list.html
</span></code></pre></td></tr></table></div></figure>


<p>其中<code>category_generator.rb</code>和<code>tag_generator.rb</code>定义了根据文章的category和tag标签分类存储文章的方法，<code>category_tag_cloud.rb</code>则可以定义了根据category或tag生成3D标签云的方法。<code>category_list.rb</code>和<code>tag_list.rb</code>实现了将所有文章的category和tag列出来的方法，其中category可以显示文章个数，tag根据此标签文章多少，大小随着改变。</p>

<p>四个HTML文件则是category和tag的列表和3D标签云的侧边栏实现。需要哪个，在<code>default_asides</code>中添加即可。</p>

<p>还有一点需要注意，在_config.yml中默认设置了category的目录，需自己加入tag目录</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>category_dir: blog/categories
</span><span class='line'>tag_dir: blog/tags
</span></code></pre></td></tr></table></div></figure>


<p>这样可以观看效果了，不过3D效果的标签云，对于不支持flash的浏览器无效，如<code>safari</code>。</p>

<p>标签功能的实现，我参考了一下几篇文章：</p>

<ul>
<li><p><a href="http://codemacro.com/2012/07/18/add-category-list-to-octopress/">为octopress添加分类(category)列表</a></p></li>
<li><p><a href="http://blog.log4d.com/2012/05/tag-cloud/">给 Octopress 加上标签功能</a></p></li>
<li><p><a href="http://guori12321.github.io/blog/2013/08/20/gei-octopresstian-jia-3dyun-biao-qian/">给octopress添加3D标签云</a></p></li>
</ul>


<h3>2.9 相关文章功能</h3>

<p>此功能即根据当前阅读的文章，分析博客中其他与此相近的文章，进行推荐的一个功能，在octopress wiki中推荐的第三方插件中有一个插件实现此功能，项目主页<a href="https://github.com/jcftang/octopress-relatedposts">点击这里</a>。该插件，利用octopress自带的LSI实现对文章分析分类，然后进行推荐，但当文章较多时分类过慢，它推荐安装GSL来进行分类。我安装过这个功能，但不知道它是根据什么规则分类，而且之后不知道安装了什么，之后每次分类都会出错。你可以自己尝试一下，项目主页都有详细的步骤。</p>

<p>就在我想放弃这个功能的时候，我发现了它――<a href="https://github.com/LawrenceWoodman/related_posts-jekyll_plugin">related_posts-jekyll_plugin</a>。这个插件很简单，只需下载_plugins/related_posts.rb放在自己的plugins文件夹中，然后在想添加相关文章推荐的地方添加如下语句：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h2&gt;</span>相关文章：<span class="nt">&lt;/h2&gt;</span>
</span><span class='line'>  <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;posts&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>       {% for post in site.related_posts limit:5 %}
</span><span class='line'>          <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;related&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ root_url }}{{ post.url }}&quot;</span><span class="nt">&gt;</span>{{ post.title }}<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>      {% endfor %}
</span><span class='line'>  <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'> <span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>我是在source/_layouts/post.html中加入的这些语句，这个html文件是打开博文时的布局，我将相关文章添加在博文的结束处。</p>

<p>这个插件是根据文章的tag进行分类的，根据所有博文与本篇文章共同tag的多少依次排序进行推荐，还是很简单有效的。</p>

<p>参考<a href="http://techtinkering.com/2011/08/17/improving-related-posts-on-jekyll/">这里</a></p>

<h2>3. 社会化评论与分享</h2>

<h3>3.1 友言和加网</h3>

<p>octopress内置了disqus评论系统，不适合我国基本国情，所以需要用一些国内的第三方评论系统，如友言、多说，可以以微博、人人、QQ等账号登陆发表评论，网站通过验证后可以对评论进行分析，管理。</p>

<p>多说评论系统可参见<a href="http://havee.me/internet/2013-02/add-duoshuo-commemt-system-into-octopress.html">为 Octopress 添加多说评论系统</a>，不多做介绍。</p>

<p>我主要使用的是友言的一套评论系统及插件，分享使用的是加网JiaThis。首先注册<a href="http://www.uyan.cc/">友言</a>账号，否则无法进行后台管理。注册之后获得代码，添加到<code>source/_includes/post/share_comment.html</code>。加网<a href="http://www.jiathis.com/getcode/icon">点击这里</a>，定制自己喜欢的样式，获得代码也添加到上述文件中。</p>

<p>share_comment.html文件中代码如下（每个人不同）：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- JiaThis BEGIN --&gt;</span>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;jiathis_style_32x32&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;jiathis_button_qzone&quot;</span><span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;jiathis_button_tsina&quot;</span><span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;jiathis_button_tqq&quot;</span><span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;jiathis_button_weixin&quot;</span><span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;jiathis_button_renren&quot;</span><span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.jiathis.com/share?uid=*******&quot;</span> <span class="na">class=</span><span class="s">&quot;jiathis jiathis_txt jtico jtico_jiathis&quot;</span> <span class="na">target=</span><span class="s">&quot;_blank&quot;</span><span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;jiathis_counter_style&quot;</span><span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://v3.jiathis.com/code/jia.js?uid=1361705530382241&quot;</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="c">&lt;!-- JiaThis END --&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- Baidu Button BEGIN </span>
</span><span class='line'><span class="c">&lt;div id=&quot;bdshare&quot; class=&quot;bdshare_t bds_tools_32 get-codes-bdshare&quot;&gt;</span>
</span><span class='line'><span class="c">        &lt;a class=&quot;bds_tsina&quot;&gt;&lt;/a&gt;</span>
</span><span class='line'><span class="c">        &lt;a class=&quot;bds_qzone&quot;&gt;&lt;/a&gt;</span>
</span><span class='line'><span class="c">        &lt;a class=&quot;bds_tqq&quot;&gt;&lt;/a&gt;</span>
</span><span class='line'><span class="c">        &lt;a class=&quot;bds_renren&quot;&gt;&lt;/a&gt;</span>
</span><span class='line'><span class="c">        &lt;a class=&quot;bds_t163&quot;&gt;&lt;/a&gt;</span>
</span><span class='line'><span class="c">        &lt;a class=&quot;bds_hi&quot;&gt;&lt;/a&gt;</span>
</span><span class='line'><span class="c">        &lt;span class=&quot;bds_more&quot;&gt;&lt;/span&gt;</span>
</span><span class='line'><span class="c">        &lt;a class=&quot;shareCount&quot;&gt;&lt;/a&gt;</span>
</span><span class='line'><span class="c">&lt;/div&gt;</span>
</span><span class='line'><span class="c">&lt;script type=&quot;text/javascript&quot; id=&quot;bdshare_js&quot; data=&quot;type=tools&amp;amp;uid=6839808&quot; &gt;&lt;/script&gt;</span>
</span><span class='line'><span class="c">&lt;script type=&quot;text/javascript&quot; id=&quot;bdshell_js&quot;&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="c">&lt;script type=&quot;text/javascript&quot;&gt;</span>
</span><span class='line'><span class="c">        document.getElementById(&quot;bdshell_js&quot;).src = &quot;http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=&quot; + Math.ceil(new Date()/3600000)</span>
</span><span class='line'><span class="c">&lt;/script&gt;</span>
</span><span class='line'><span class="c"> Baidu Button END --&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- UY BEGIN --&gt;</span>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;uyan_frame&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://v2.uyan.cc/code/uyan.js?uid=*******&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="c">&lt;!-- UY END --&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>其中有一段代码注释掉了，那是我曾经添加的百度分享的代码，如果使用其他分享或评论，代码也可以添加到这。</p>

<p>现在功能代码在share_comment.html中了，下面需要使其显示到博文的底部。</p>

<p>首先在_config.yml中添加开关：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'># comment and share
</span><span class='line'>comment_share: true
</span></code></pre></td></tr></table></div></figure>


<p>然后在<code>source/_includes/post/sharing.html</code>中添加如下代码：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{% if site.comment_share %}
</span><span class='line'>  {% include post/share_comment.html %}
</span><span class='line'>{% endif %}
</span></code></pre></td></tr></table></div></figure>


<p>最后需要使你的网站通过友言的验证，才可以进行后台管理，后台可以进行评论管理、社交影响力分析、和评论栏的风格功能设置。</p>

<h3>3.2 评论热榜和最新评论侧边栏</h3>

<p>友言提供了多个嵌入式组件，如评论热榜、最新评论、评论计数等。我们可以将他们做成侧边栏进行展示，或在首页文章列表中，显示每篇文章的评论数目。</p>

<p>首先在你的友言后台管理中找到<code>安装设置-&gt;嵌入式组件</code>获得评论热榜和最新评论的代码，分别创建<code>source/_includes/custom/asides/uyan_hotcmt.html</code>和<code>source/_includes/custom/asides/uyan_newcmt.html</code>，代码如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'><span class="nt">&lt;h1&gt;</span>评论热榜<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;uyan_hotcmt_unit&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://v2.uyan.cc/code/uyan.js?uid=*******&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'><span class="nt">&lt;h1&gt;</span>最新评论<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;uyan_newcmt_unit&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://v2.uyan.cc/code/uyan.js?uid=*******&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>然后再<code>_config.yml</code>的<code>default_asides</code>中添加其路径即可显示在侧边栏中。</p>

<p>友言评论框、评论热榜、最新评论可以在后台进行设置，改变设置并不需要更改代码。</p>

<h3>3.3 评论计数显示</h3>

<p>友言提供评论计数功能，可以将每篇文章的评论数显示在博客首页相应文章题目旁。实现方法为：在<code>source/_includes/article.html</code>中</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{% include post/date.html %}{{ time }}
</span></code></pre></td></tr></table></div></figure>


<p>的后边填入嵌入组件中获得的评论计数的代码，需要修改其中一些内容</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'> | <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;{% if index %}{{ root_url }}{{ post.url }}{% endif %}#comments&quot;</span> <span class="na">id=</span><span class="s">&quot;uyan_count_unit&quot;</span> <span class="na">du=</span><span class="s">&quot;&quot;</span> <span class="na">su=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>0条评论<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://v2.uyan.cc/code/uyan.js?uid=*******&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>4. 为博文添加原文链接及声明</h2>

<p>可以为你的每篇博文末尾加上原文链接，方法很简单，只需创建<code>plugins/post_footer_filter.rb</code>，代码如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='rb'><span class='line'><span class="c1"># post_footer_filter.rb</span>
</span><span class='line'><span class="c1"># Append every post some footer infomation like original url </span>
</span><span class='line'><span class="c1"># Kevin Lynx</span>
</span><span class='line'><span class="c1"># 7.26.2012</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;./plugins/post_filters&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">module</span> <span class="nn">AppendFooterFilter</span>
</span><span class='line'>        <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="n">post</span><span class="p">)</span>
</span><span class='line'>                <span class="n">author</span> <span class="o">=</span> <span class="n">post</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;author&#39;</span><span class="o">]</span>
</span><span class='line'>                <span class="n">url</span> <span class="o">=</span> <span class="n">post</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;url&#39;</span><span class="o">]</span>
</span><span class='line'>                <span class="n">pre</span> <span class="o">=</span> <span class="n">post</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;original_url_pre&#39;</span><span class="o">]</span>
</span><span class='line'>                <span class="n">post</span><span class="o">.</span><span class="n">content</span> <span class="o">+</span> <span class="sx">%Q[&lt;p class=&#39;post-footer&#39;&gt;</span>
</span><span class='line'><span class="sx">                        </span><span class="si">#{</span><span class="n">pre</span> <span class="ow">or</span> <span class="s2">&quot;original link:&quot;</span><span class="si">}</span><span class="sx">&lt;a href=&#39;</span><span class="si">#{</span><span class="n">post</span><span class="o">.</span><span class="n">full_url</span><span class="si">}</span><span class="sx">&#39;&gt;</span><span class="si">#{</span><span class="n">post</span><span class="o">.</span><span class="n">full_url</span><span class="si">}</span><span class="sx">&lt;/a&gt;&lt;br/&gt;&amp;nbsp;written by &lt;a href=&#39;</span><span class="si">#{</span><span class="n">url</span><span class="si">}</span><span class="sx">&#39;&gt;</span><span class="si">#{</span><span class="n">author</span><span class="si">}</span><span class="sx">&lt;/a&gt;&amp;nbsp;posted at &lt;a href=&#39;</span><span class="si">#{</span><span class="n">url</span><span class="si">}</span><span class="sx">&#39;&gt;</span><span class="si">#{</span><span class="n">url</span><span class="si">}</span><span class="sx">&lt;/a&gt;&lt;/p&gt;]</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">module</span> <span class="nn">Jekyll</span>
</span><span class='line'>        <span class="k">class</span> <span class="nc">AppendFooter</span> <span class="o">&lt;</span> <span class="no">PostFilter</span>
</span><span class='line'>                <span class="kp">include</span> <span class="no">AppendFooterFilter</span>
</span><span class='line'>                <span class="k">def</span> <span class="nf">pre_render</span><span class="p">(</span><span class="n">post</span><span class="p">)</span>
</span><span class='line'>                        <span class="n">post</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">append</span><span class="p">(</span><span class="n">post</span><span class="p">)</span> <span class="k">if</span> <span class="n">post</span><span class="o">.</span><span class="n">is_post?</span>
</span><span class='line'>                <span class="k">end</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="ss">Liquid</span><span class="p">:</span><span class="ss">:Template</span><span class="o">.</span><span class="n">register_filter</span> <span class="no">AppendFooterFilter</span>
</span></code></pre></td></tr></table></div></figure>


<p>并可以针对这一区域的样式进行美化，在<code>sass/custom/_style.scss</code>末尾增加下列内容：</p>

<pre><code>.post-footer{margin-top:10px;padding:5px;background:none repeat scroll 0pt 0pt #eee;font-size:90%;color:gray}
</code></pre>

<p>尊重原创，此功能来源<a href="http://codemacro.com/2012/07/26/post-footer-plugin-for-octopress/">为octopress每篇文章添加一个文章信息</a>。</p>

<h2>5. 公益404</h2>

<p>在<code>source</code>目录下创建404.markdown，添加如下代码，即可实现公益404的功能，当你的网页出错找不到时，可以为公益尽一份力。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='rb'><span class='line'><span class="o">---</span>
</span><span class='line'><span class="ss">layout</span><span class="p">:</span> <span class="n">page</span>
</span><span class='line'><span class="ss">title</span><span class="p">:</span> <span class="s2">&quot;404 Error&quot;</span>
</span><span class='line'><span class="ss">date</span><span class="p">:</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">10</span> <span class="mi">19</span><span class="p">:</span><span class="mi">17</span>
</span><span class='line'><span class="ss">comments</span><span class="p">:</span> <span class="kp">false</span>
</span><span class='line'><span class="ss">sharing</span><span class="p">:</span> <span class="kp">false</span>
</span><span class='line'><span class="ss">footer</span><span class="p">:</span> <span class="kp">false</span>
</span><span class='line'><span class="o">---</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">script</span> <span class="n">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;http://www.qq.com/404/search_children,js&quot;</span> <span class="n">charset</span><span class="o">=</span><span class="s2">&quot;utf-8&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<p>好了先写到这了，还有一些东西没写，等后续再写吧。</p>

<p>参考文章：</p>

<ul>
<li><p><a href="http://biaobiaoqi.me/blog/2013/07/10/decorate-octopress/">定制Octopress</a></p></li>
<li><p><a href="http://xuhehuan.com/141.html">精美的3D旋转地球统计RevolverMaps</a></p></li>
</ul>


<p class='post-footer'>
            original link:<a href='http://812lcl.com/blog/2013/10/26/octopressce-bian-lan-ji-ping-lun-xi-tong-ding-zhi/'>http://812lcl.com/blog/2013/10/26/octopressce-bian-lan-ji-ping-lun-xi-tong-ding-zhi/</a><br/>&nbsp;written by <a href='http://812lcl.com'>812lcl</a>&nbsp;posted at <a href='http://812lcl.com'>http://812lcl.com</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress博客搭建及目录结构]]></title>
    <link href="http://812lcl.com/blog/2013/10/25/octopressbo-ke-da-jian-ji-mu-lu-jie-gou/"/>
    <updated>2013-10-25T11:49:00+08:00</updated>
    <id>http://812lcl.com/blog/2013/10/25/octopressbo-ke-da-jian-ji-mu-lu-jie-gou</id>
    <content type="html"><![CDATA[<p>搭建个人博客的想法有一段时间了，不是认为自己有多牛，而是想通过写博客记录并反思自己的学习历程，能使学过的东西更具条理，慢慢形成自己的知识体系。但自己租个服务器，买个域名，一点一点搭建一个网站成本又太大，我对HTML、javascript、css等前端技术了解有限，网站搭建很多技术也知之甚少。但后来Jekyll、Octopress、GitHub pages让我搭建个人博客成为了可能。</p>

<p>最终选择了octopress，也是因为他的简单，他基于Jekyll，处理了Jekyll的很多麻烦设置，也不需要对前端技术有很深的了解，从一开始什么也没有，到搭建起一个可用的博客只需花费十几分钟，十分方便，虽然想要配置齐自己想要的东西还是需要一番折腾的，但那是后话了。</p>

<p>我的搭建环境是ubuntu 13.04，不同的系统需要作出相应的修改，但变化不大。我的博客中添加了3D标签、微博秀、豆瓣读书、相关文章推荐、访客地图、评论分享、文章热度排名等等很多东西，本文主要介绍简单博客的搭建和目录结构，之后会写篇文章介绍各个模块的搭建。</p>

<!--more-->


<h2>开始搭建</h2>

<p>Octopress博客是搭建在github上的静态网页，octopress相当于一个自动化生成静态网页的工具，网页并没有使用数据库等，使用的是github提供的服务器和域名。github pages为每个用户提供一个名为<code>http://username.github.com</code>的域名。你首先需要在github上建立一个名为<code>username.github.com</code>的仓库，之后的博客将会部署到这个仓库中，部署成后你就可以从<code>http://username.github.com</code>访问你的博客了，不过可能需要等待十分钟。</p>

<p>利用到了github，所以首先应该配置好你的git环境，包括安装git，创建ssh公私钥与github建立信任连接，设置github用户名和邮箱，如果你不熟悉可以参考<a href="http://www.worldhello.net/gotgithub/index.html">GotGitHub</a>。当然你还有熟悉git的基本操作了，<a href="http://rogerdudler.github.io/git-guide/index.zh.html">这里</a>是一个简易教程。</p>

<p>octopress和jekyll都是依赖于Ruby的，所以如果你没装，先要装一下它咯。octopress 2.0是依赖于Ruby 1.9.3版本的，所以我们指明版本安装：</p>

<pre><code>sudo apt-get install ruby1.9.3
</code></pre>

<p>接下来就可以安装Octopress了，首先将octopress库clone到本地，在想要放置本地仓库的位置，建一个文件夹，文件夹名随你，比如我在$HOME/处建立了blog：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd ~
</span><span class='line'>$ mkdir blog
</span><span class='line'>$ git clone git://github.com/imathis/octopress.git blog</span></code></pre></td></tr></table></div></figure>


<p>然后进入仓库，安装其他的依赖环境：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd blog
</span><span class='line'>$ sudo gem install bundler
</span><span class='line'>$ rbenv rehash
</span><span class='line'>$ bundle install      #根据Gemfile安装依赖的工具，需要耐心等待</span></code></pre></td></tr></table></div></figure>


<p>安装默认主题</p>

<pre><code>rake install
</code></pre>

<p>现在octopress安装完成，但还没有生成静态网页，还没有将其部署到网上，要设置博客使用的REPOSITORY了：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rake setup_github_pages
</span><span class='line'>Enter the read/write url for your repository
</span><span class='line'>(For example, 'git@github.com:your_username/your_username.github.com')
</span><span class='line'>Repository url:</span></code></pre></td></tr></table></div></figure>


<p>请输入：git@github.com:yourname/yourname.github.com.git (将yourname替换成你的github登录名)</p>

<p>这个步骤rake会做很多事情：</p>

<ol>
<li>在.git/config中替换origin为你输入的repository，并把原来的origin写到octopress中。</li>
<li>创建新的branch source并切换到这个branch。</li>
<li>在生成的_deploy目录下，初始化git repository为你的repository。</li>
</ol>


<p>接下来就可以生成静态网页，并将其部署到github上了，只需如下两句：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake generate    #生成静态网页
</span><span class='line'>rake deploy   #发布网页</span></code></pre></td></tr></table></div></figure>


<p>等待几分钟后，网页就已经部署好了，你可以访问你的域名查看自己的博客了。然后可以将源码添加到github中进行管理，你仓库中有两个分支，master分支是静态网页，source分支则是你的生成网页的源码，这样在另一台电脑上你可以clone你的仓库，很容易的进行你的博客编写。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git add .
</span><span class='line'>git commit -m 'init'
</span><span class='line'>git push origin source</span></code></pre></td></tr></table></div></figure>


<p>现在就可以进行文章的编写了，编写文章使用markdown语法，十分便捷，语法简单，可参见<a href="http://wowubuntu.com/markdown/index.html#code">markdown语法说明</a>。输入如下命令：</p>

<pre><code>rake new_post['title']
</code></pre>

<p>在~/blog/source/_posts下回生成一个名为<code>YYYY-MM-DD-title.markdown</code>的文件，在这个文件中编写你的文章即可。编写完成后依然按上边发布网页的方法发布即可：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake generate    #生成静态网页
</span><span class='line'>rake deploy   #发布网页</span></code></pre></td></tr></table></div></figure>


<p>或者也可以生成静态网页后，在本机进行预览</p>

<pre><code>rake preview
</code></pre>

<p>然后可以通过<code>http://localhost:4000</code>访问，状态满意即可发布网页，以上几步同样适用于更改网页布局、样式等，重新发布网页。</p>

<h2>_config.yml</h2>

<p>这是你的博客根目录下下的一个文件，通过编写它，可以设置网站基本信息，设置边栏等：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>url: http://812lcl.github.io         #网站地址
</span><span class='line'>title: 812lcl的博客                #网站名
</span><span class='line'>subtitle: 不要好高骛远，却又原地踏步；只想不做，太辜负青春了     #网站副标题
</span><span class='line'>author: 812lcl                        #作者名
</span><span class='line'>lunr_search: false                    #lunr站内搜索，需要安装，麻烦
</span><span class='line'>simple_search: http://google.com/search   #默认搜索引擎
</span><span class='line'>description:                      #网站描述
</span><span class='line'>...
</span><span class='line'>default_asides: [custom/asides/tag_cloud.html, asides/recent_posts.html, custom/asides/popular_posts.html...]
</span><span class='line'>#边栏需要在这里添加路径</span></code></pre></td></tr></table></div></figure>


<p>这个文件是很重要的配置文件，配置博客需要经常修改此文件。</p>

<h2>目录结构</h2>

<p>之所以要介绍目录结构，是为了更清晰的了解各个文件是做什么用的，修改网站样式添加侧栏等等需要修改那些文件。以免按着教程一个一个设置完成，在脑子中却一团糟不记得修改了什么，万一出现了错误就不好了。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>├─ config.rb  #指定额外的compass插件
</span><span class='line'>├─ config.ru  
</span><span class='line'>├─ Rakefile   #rake的配置文件,类似于makefile
</span><span class='line'>├─ Gemfile    #bundle要下载需要的gem依赖关系的指定文件
</span><span class='line'>├─ Gemfile.lock  #这些gem依赖的对应关系,比如A的x本依赖于B的y版本
</span><span class='line'>├─ _config.yml   #站点的配置文件
</span><span class='line'>├─ public/    #在静态编译完成后的目录,网站只需要这个目录下的文件树
</span><span class='line'>├─ _deploy/   #deploy时候生成的缓存文件夹,和public目录一样
</span><span class='line'>├─ sass/      #css文件的源文件,过程中会compass成css
</span><span class='line'>├─ plugins/   #放置自带以及第三方插件的目录,ruby程序
</span><span class='line'>│  └── xxx.rb
</span><span class='line'>└─ source/    #站点的源文件目录,public目录就是根据这个目录下数据生成的
</span><span class='line'>   └─ _includes/
</span><span class='line'>      └─ custom/      #自定义的模板目录,被相应上级html include
</span><span class='line'>         └─ asides/   #边栏模板自定义模板目录
</span><span class='line'>      └─ asides/      #边栏模板目录
</span><span class='line'>      └─ post/        #文章页面相应模板目录
</span><span class='line'>   └─ _layouts/       #默认网站html相关文件,最底层
</span><span class='line'>   └─ _posts/         #新增以及从其它程序迁移过来的数据都存在这里
</span><span class='line'>   └─ stylesheets/    #css文件目录
</span><span class='line'>   └─ javascripts/    #js文件目录
</span><span class='line'>   └─ images/         #图片目录</span></code></pre></td></tr></table></div></figure>


<p>其中需要添加第三方插件时，将插件xxx.rb放入plugins文件夹中。最主要的文件夹是source文件夹，因为修改网页都是在这个文件夹中进行。自己添加的边栏的HTML文件都放置于<code>source/_includes/custom/asides</code>中，然后再_config.yml中的default_asides:中添加对应的路径，即可在网页上显示出边栏。修改<code>source/_includes/</code>中的其他HTML文件，如header.html等，则可以修改标题栏、导航栏、尾栏等等。</p>

<p><code>source/_layouts</code>中则是网站的布局的一些HTML文件，可以修改文件布局等等。三个文件夹目录是非常重要并且常修改的。source中images中则放置网站相关的一些图片，javascripts文件家中放置一些模块需要调用的javascript脚本，_post中则是你的每篇博客。</p>

<hr />

<p>以上就是Octopress博客搭建的一个简单过程和目录结构，之后会详细介绍我的博客中各个模块建立的过程及出现的问题，敬请关注。</p>

<p>参考文章：</p>

<ul>
<li><p><a href="http://easypi.github.io/blog/2013/01/05/using-octopress-to-setup-blog-on-github/">利用Octopress在github Pages上搭建个人博客</a></p></li>
<li><p><a href="http://www.dongwm.com/archives/qian-yi-octpressyi-ji-zi-ding-yi/">迁移octpress,Rakefile修改以及豆瓣推荐,豆瓣收藏秀,新浪微博分享按钮等实现</a></p></li>
<li><p><a href="http://www.csdn123.com/html/blogs/20130531/17852.htm">Octopress博客设置</a></p></li>
</ul>


<p class='post-footer'>
            original link:<a href='http://812lcl.com/blog/2013/10/25/octopressbo-ke-da-jian-ji-mu-lu-jie-gou/'>http://812lcl.com/blog/2013/10/25/octopressbo-ke-da-jian-ji-mu-lu-jie-gou/</a><br/>&nbsp;written by <a href='http://812lcl.com'>812lcl</a>&nbsp;posted at <a href='http://812lcl.com'>http://812lcl.com</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[VIM插件配置，比肩IDE]]></title>
    <link href="http://812lcl.com/blog/2013/10/24/vimcha-jian-pei-zhi-%2Cbi-jian-ide/"/>
    <updated>2013-10-24T20:28:00+08:00</updated>
    <id>http://812lcl.com/blog/2013/10/24/vimcha-jian-pei-zhi-,bi-jian-ide</id>
    <content type="html"><![CDATA[<p>vim的强大是众所周知的，而且在linux里的普及也是其他编辑器无法比拟的。它默认的功能已经很高效方便了，但人们并不满足于此，各种各样的插件也使他的功能更加丰满，更加便捷，下面主要讲一下我的vim插件及配置过程。</p>

<p>现在有很多的vim插件管理插件，如bundle、pathogen。我并没有去使用它们，而是自己一点一点的配置完成，然后将其上传到Github，以后需要重新配置，clone下来即可，分分钟搞定，很方便，可以查看<a href="https://github.com/812lcl">我的GitHub</a>。</p>

<!--more-->


<p>首先，vim一般是linux自带了，在/usr/share/vim文件夹中，可以将要安装的插件及说明文档等放置这个目录的相应位置。其中有连接指向/etc/vim，可修改/etc/vim中的vimrc配置文件对vim进行设置。但不推荐这样做，这样以后想删除哪个插件比较麻烦。一般的做法是在$HOME文件夹下建立一个.vim文件夹，自己的插件、说明文档、语法高亮、配色方案等可以放在这个文件夹中的相应位置，配置文件为$HOME/.vimrc。这样不影响其他用户的配置，而且自己想恢复原来的vim，删除.vimrc和.vim文件夹即可。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>|- .vim
</span><span class='line'>  └colors   配色方案
</span><span class='line'>  └plugin   插件
</span><span class='line'>  └doc      说明文档
</span><span class='line'>  └syntax   语法高亮
</span><span class='line'>  └after    修正脚本
</span><span class='line'>  └autoload     自动加载</span></code></pre></td></tr></table></div></figure>


<p>下面正式开始配置了，提到的插件插件可以到<a href="http://www.vim.org/index.php">vim online</a>下载，下载好放入~/.vim/plugin即可。</p>

<h2>1. ctags</h2>

<p>这是很重要的一个插件，大多数linux发行版本默认安装了ctags，如果没有可如下安装</p>

<pre><code>$ sudo apt-get install ctags
</code></pre>

<p>或者下载源文件，编译安装</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ tar -xzvf ctags-5.6.tar.gz
</span><span class='line'>$ cd ctags-5.6
</span><span class='line'>$ make
</span><span class='line'>$ sudo make install</span></code></pre></td></tr></table></div></figure>


<p>有了ctags，可以生成标签文件，识别出程序中的函数定义调用关系，变量，宏定义等，看到一个函数调用时，只需按下&#8221;Ctrl+]&ldquo;，就可以跳转到其定义的地方，然后可以按&#8221;Ctrl+T&#8221;调回调用处。而且，有些其他插件的实现是依赖ctags实现的，所以ctags还是很重要的。使用方法如下</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd 程序根目录
</span><span class='line'>ctags -R      //生成tags文件
</span><span class='line'>vim 程序源文件
</span><span class='line'>:set tags=程序根目录/tags</span></code></pre></td></tr></table></div></figure>


<h2>2. taglist</h2>

<p>taglist是依赖ctags发挥作用的，查看源文件时，可以打开taglist，就可以清晰的看到该文件中的函数名、变量名、宏定义等。可以选择相应的名字，查看定义的位置。安装只需下载taglis.vim，置于~/.vim/plugin中，然后在~/.vimrc中添加如下两句</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>let Tlist_Show_One_File=1       "让taglist可以同时展示一个文件的函数列表
</span><span class='line'>let Tlist_Exit_OnlyWindow=1     "当taglist是最后一个分割窗口时，自动退出vim</span></code></pre></td></tr></table></div></figure>


<p>然后可以在vim中输入<code>:Tlist</code>查看效果了。</p>

<h2>3. netrw和winmanager</h2>

<p>netrw是自带一个插件，不需要自己安装了，作用是显示文件夹中的子文件夹和文件情况。当用vim打开一个文件夹时，就是netrw的功能，可以进而删除、创建、修改文件文件夹。配合taglist使用，可以使vim更像一个IDE，更方便查看源程序文件。而winmanager就是整合taglist和netrw窗口的。同样下载winmanager.vim，放在~/.vim/plugin中，然后在.vimrc中填入如下</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>let g:winManagerWindowLayout='FileExplorer|TagList'
</span><span class='line'>let g:persistentBehaviour=0         "如果所有编辑文件都关闭了，退出vim
</span><span class='line'>let g:winManagerWidth = 30          "窗口默认宽带        
</span><span class='line'>let g:defaultExplorer=1
</span><span class='line'>nmap &lt;silent&gt; &lt;F8&gt; :WMToggle&lt;cr&gt;</span></code></pre></td></tr></table></div></figure>


<p>最后一句为设置快捷键，按F8或者<code>:WMToggle</code>即可打开两个窗口。</p>

<h2>4. cscope</h2>

<p>这又是个强大的工具，是和ctags有类似功能，但比ctags更加强大的工具，具有在整个工程文件中更强大的查找功能。</p>

<p>首先安装，仍可以使用apt-get</p>

<pre><code>sudo apt-get install cscope
</code></pre>

<p>在~/.vimrc中增加一句：</p>

<pre><code>:set cscopequickfix=s-,c-,d-,i-,t-,e-        " 使用QuickFix窗口来显示cscope查找结果
</code></pre>

<p>使用也是如ctags类似，先在工程根目录下生成一个cscope的数据库，要查找时，需要把cscope.out导入到vim中，然后可以进行各种查找。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd 工作目录
</span><span class='line'>cscope -Rbq
</span><span class='line'>vim 工程文件
</span><span class='line'>:cs add 工作目录/cscope.out 工程文件
</span><span class='line'>:cs find c|d|e|f|g|i|s|t name</span></code></pre></td></tr></table></div></figure>


<p>其中c、d、e等代表不同的查找类型</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>0 或 s  查找本 C 符号(可以跳过注释)
</span><span class='line'>1 或 g   查找本定义
</span><span class='line'>2 或 d   查找本函数调用的函数
</span><span class='line'>3 或 c   查找调用本函数的函数
</span><span class='line'>4 或 t   查找本字符串
</span><span class='line'>6 或 e   查找本 egrep 模式
</span><span class='line'>7 或 f   查找本文件
</span><span class='line'>8 或 i   查找包含本文件的文件                        </span></code></pre></td></tr></table></div></figure>


<p>查找后vim会自动跳到第一个符合的地方，如果不满意可以用<code>:cw</code>打开quickfix窗口，自己选择跳转位置。当然查找命令可能有些长，总去输入不太方便，可设置快捷键，在.vimrc中添加</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>" 按下面这种组合键有技巧,按了&lt;C-_&gt;后要马上按下一个键,否则屏幕一闪
</span><span class='line'>" 就回到nomal状态了
</span><span class='line'>" &lt;C-_&gt;s的按法是先按"Ctrl+Shift+-",然后很快再按"s"
</span><span class='line'>nmap &lt;C-_&gt;s :cs find s &lt;C-R&gt;=expand("&lt;cword&gt;")&lt;cr&gt;&lt;cr&gt; :cw&lt;cr&gt;
</span><span class='line'>nmap &lt;C-_&gt;g :cs find g &lt;C-R&gt;=expand("&lt;cword&gt;")&lt;cr&gt;&lt;cr&gt; :cw&lt;cr&gt;
</span><span class='line'>nmap &lt;C-_&gt;c :cs find c &lt;C-R&gt;=expand("&lt;cword&gt;")&lt;cr&gt;&lt;cr&gt; :cw&lt;cr&gt;
</span><span class='line'>nmap &lt;C-_&gt;t :cs find t &lt;C-R&gt;=expand("&lt;cword&gt;")&lt;cr&gt;&lt;cr&gt; :cw&lt;cr&gt;
</span><span class='line'>nmap &lt;C-_&gt;e :cs find e &lt;C-R&gt;=expand("&lt;cword&gt;")&lt;cr&gt;&lt;cr&gt; :cw&lt;cr&gt;
</span><span class='line'>nmap &lt;C-_&gt;f :cs find f &lt;C-R&gt;=expand("&lt;cfile&gt;")&lt;cr&gt;&lt;cr&gt;
</span><span class='line'>nmap &lt;C-_&gt;i :cs find i &lt;C-R&gt;=expand("&lt;cfile&gt;")&lt;cr&gt;&lt;cr&gt; :cw&lt;cr&gt;
</span><span class='line'>nmap &lt;C-_&gt;d :cs find d &lt;C-R&gt;=expand("&lt;cword&gt;")&lt;cr&gt;&lt;cr&gt; :cw&lt;cr&gt;</span></code></pre></td></tr></table></div></figure>


<p>好了，暂时就这些，cscope在大型工程中查找非常方便，但也需要慢慢学习适应使用。</p>

<h2>5. quickfix</h2>

<p>刚刚提到过quickfix窗口，可以显示查询结果，他也可以显示make的时候出现的错误列表，可以选择错误，找到出错位置，进而调试，这在IDE中是很常用的，vim也实现了。而且quickfix并不需要安装，是vim的标准插件，可以使用时，输入<code>:cw</code>即可。<code>:cn</code>和<code>:cp</code>是切换结果的命令，可以定义快捷键，在.vimrc中添加几句话。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>nmap &lt;F6&gt; :cp&lt;cr&gt;
</span><span class='line'>nmap &lt;F7&gt; :cn&lt;cr&gt;</span></code></pre></td></tr></table></div></figure>


<p>可以试验一下功能，写一个简单的c程序，将其中几句话写成有错误的，写一个makefile文件，打开源文件，用<code>:make</code>进行编译，编译会报错。编译结束回到代码界面时输入<code>:cw</code>打开quickfix窗口，可以看到刚刚编译的几条错误，按F6或F7切换错误，回车可以到达错误所在的行，进行修改。</p>

<h2>6. minibufexplorer</h2>

<p>仍然是将下载的minibufexplorer.vim放入plugin中即可。</p>

<p>在编程的时候不可能永远只编辑一个文件,肯定会打开很多源文件进行编辑,如果每个文件都打开一个vim进行编辑的话那操作起来将很多麻烦,所以vim有buffer(缓冲区)的概念,当你只编辑一个buffer的时候MiniBufExplorer派不上用场,当你打开第二个buffer的时候,MiniBufExplorer窗口就自动弹出来了。列出了当前所有已经打开的buffer,当你把光标置于这个窗口时,有下面几个快捷键可以用:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;Tab&gt;  向前循环切换到每个buffer名上
</span><span class='line'>&lt;S-Tab&gt; 向后循环切换到每个buffer名上
</span><span class='line'>&lt;Enter&gt; 在打开光标所在的buffer
</span><span class='line'>d         删除光标所在的buffer</span></code></pre></td></tr></table></div></figure>


<p>在.vimrc中添加如下语句，进行一定的设置</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>let g:miniBufExplMapCTabSwitchBufs = 1      "启用以下两个功能：Ctrl+tab移到下一个buffer并在当前窗口打开；
</span><span class='line'>                                            "Ctrl+Shift+tab移到上一个buffer并在当前窗口打开；ubuntu好像不支持
</span><span class='line'>let g:miniBufExplMapWindowNavVim = 1        "可以用&lt;C-h,j,k,l&gt;切换到上下左右的窗口中
</span><span class='line'>let g:miniBufExplMapWindowNavArrows = 1     "可用&lt;C-箭头键&gt;切换到上下左右窗口中
</span><span class='line'>let g:miniBufExplModSelTarget = 1           "不在不可编辑内容的窗口（如TagList窗口）中打开选中的buffer</span></code></pre></td></tr></table></div></figure>


<p>这样就很清晰的看到，当前打开了多少个文件，切换也很方便。</p>

<h2>7. a.vim</h2>

<p>这是一个很方便在源文件和头文件间进行切换的插件，下载好放入plugin中即可，命令如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>:A   在新Buffer中切换到c/h文件
</span><span class='line'>:AS   横向分割窗口并打开c/h文件
</span><span class='line'>:AV   纵向分割窗口并打开c/h文件
</span><span class='line'>:AT   新建一个标签页并打开c/h文件</span></code></pre></td></tr></table></div></figure>


<p>还可以在.vimrc中添加快捷键设置</p>

<pre><code>nnoremap &lt;silent&gt; &lt;F12&gt; :A&lt;CR&gt;
</code></pre>

<p>之后按F12即可打开同名的头文件，再配合minibufexplorer，可以很好的进行切换。</p>

<h2>8. Grep</h2>

<p>cscope可以在工程中找到函数、变量等的调用、定义的地方，Grep则可以在全工程范围内，查找你想查找的任何东西。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>:Grep        按照指定的规则在指定的文件中查找
</span><span class='line'>:Rgrep        同上, 但是是递归的grep
</span><span class='line'>:GrepBuffer   在所有打开的缓冲区中查找
</span><span class='line'>:Bgrep        同上
</span><span class='line'>:GrepArgs 在vim的argument filenames (:args)中查找
</span><span class='line'>:Fgrep        运行fgrep
</span><span class='line'>:Rfgrep       运行递归的fgrep
</span><span class='line'>:Egrep        运行egrep
</span><span class='line'>:Regrep       运行递归的egrep
</span><span class='line'>:Agrep        运行agrep
</span><span class='line'>:Ragrep       运行递归的agrep</span></code></pre></td></tr></table></div></figure>


<p>使用方法如下</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>:Grep   [&lt;grep_options&gt;] [&lt;search_pattern&gt; [&lt;file_name(s)&gt;]]
</span><span class='line'>:Rgrep  [&lt;grep_options&gt;] [&lt;search_pattern&gt; [&lt;file_name(s)&gt;]]
</span><span class='line'>:Fgrep  [&lt;grep_options&gt;] [&lt;search_pattern&gt; [&lt;file_name(s)&gt;]]
</span><span class='line'>:Rfgrep [&lt;grep_options&gt;] [&lt;search_pattern&gt; [&lt;file_name(s)&gt;]]
</span><span class='line'>:Egrep  [&lt;grep_options&gt;] [&lt;search_pattern&gt; [&lt;file_name(s)&gt;]]
</span><span class='line'>:Regrep [&lt;grep_options&gt;] [&lt;search_pattern&gt; [&lt;file_name(s)&gt;]]
</span><span class='line'>:Agrep  [&lt;grep_options&gt;] [&lt;search_pattern&gt; [&lt;file_name(s)&gt;]]
</span><span class='line'>:Ragrep [&lt;grep_options&gt;] [&lt;search_pattern&gt; [&lt;file_name(s)&gt;]]
</span><span class='line'>:GrepBuffer [&lt;grep_options&gt;] [&lt;search_pattern&gt;]
</span><span class='line'>:Bgrep [&lt;grep_options&gt;] [&lt;search_pattern&gt;]
</span><span class='line'>:GrepArgs [&lt;grep_options&gt;] [&lt;search_pattern&gt;]</span></code></pre></td></tr></table></div></figure>


<p>也可以输入:Grep之后一步一步输入要查找的内容、名字等，会有提示。</p>

<h2>9.visualmark</h2>

<p>这是一个书签，可以将你认为有问题的代码行标记高亮，多个书签键很方便的切换。但退出文件后，标签消失，调试程序时，标注关键代码很有帮助。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mm       设定标签
</span><span class='line'>F2        正向切换
</span><span class='line'>shift+F2  反向切换</span></code></pre></td></tr></table></div></figure>


<h2>10. 补全功能</h2>

<p>使用vs等IDE时，补全功能是很方便的，能使编写更加的高效。vim中也有补全功能，ctrl+p就可以补全，但不足以满足我们的要求，要像visual stdio那样补全，需要omnicppcoplete插件，如果你使用java编程，则需要javacomplete插件。</p>

<p>安装方法与之前稍有不同，需要下载omnicppcoplete和javacomplete的zip压缩包，解压到~/.vim文件夹下，然后javacomplete还需要执行如下命令</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd ~/.vim/autoload
</span><span class='line'>javac Reflection.java
</span><span class='line'>mv ~/.vim/autoload/Reflection.class ~</span></code></pre></td></tr></table></div></figure>


<p>一切准备就绪，最后就是在.vimrc中添加相应的设置，开启补全功能</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>"-----------------------------------------------------------
</span><span class='line'>"AutoComple
</span><span class='line'>"-----------------------------------------------------------
</span><span class='line'>filetype plugin on                  "开启文件类型识别功能
</span><span class='line'>filetype plugin indent on           "打开文件类型检测, 加了这句才可以用智能补全
</span><span class='line'>set completeopt=longest,menu        "关掉智能补全时的预览窗口
</span><span class='line'>setlocal completefunc=javacomplete#CompleteParamsInfo
</span><span class='line'>autocmd FileType c set omnifunc=ccomplete#Complete
</span><span class='line'>autocmd FileType java set omnifunc=javacomplete#Complete
</span><span class='line'>autocmd FileType python set omnifunc=pythoncomplete#Complete
</span><span class='line'>autocmd FileType php set omnifunc=phpcomplete#CompletePHP
</span><span class='line'>autocmd FileType javascript set omnifunc=javascriptcomplete#CompleteJS
</span><span class='line'>autocmd FileType html set omnifunc=htmlcomplete#CompleteTags
</span><span class='line'>autocmd FileType css set omnifunc=csscomplete#CompleteCSS
</span><span class='line'>autocmd FileType xml set omnifunc=xmlcomplete#CompleteTags
</span><span class='line'>"-----------------------------------------------------------
</span><span class='line'>"OmniCppComplete
</span><span class='line'>"-----------------------------------------------------------
</span><span class='line'>" 按下F4自动补全代码
</span><span class='line'>imap &lt;F4&gt; &lt;C-X&gt;&lt;C-O&gt;
</span><span class='line'>" 按下F5根据头文件内关键字补全
</span><span class='line'>imap &lt;F5&gt; &lt;C-X&gt;&lt;C-I&gt;
</span><span class='line'>let OmniCpp_MayCompleteDot = 1           " autocomplete with .
</span><span class='line'>let OmniCpp_MayCompleteArrow = 1         " autocomplete with -&gt;
</span><span class='line'>let OmniCpp_MayCompleteScope = 1         " autocomplete with ::
</span><span class='line'>let OmniCpp_SelectFirstItem = 2          " select first item (but don't insert)
</span><span class='line'>let OmniCpp_NamespaceSearch = 2         " search namespaces in this and included file
</span><span class='line'>let OmniCpp_ShowPrototypeInAbbr = 1     " show function prototype in popup window
</span><span class='line'>let OmniCpp_GlobalScopeSearch=1         " enable the global scope search
</span><span class='line'>let OmniCpp_DisplayMode=1               " Class scope completion mode: always show all members
</span><span class='line'>let OmniCpp_ShowScopeInAbbr=1           " show scope in abbreviation and remove the last column</span></code></pre></td></tr></table></div></figure>


<p>现在一切都设置好了，比如编写个a.java，输入Math.然后按<code>ctrl+x ctrl+o</code>就可以出现可以补全的选项了，我设置了F4和F5两个快捷键，不同的补全方式和操作如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Ctrl+P   向前切换成员
</span><span class='line'>Ctrl+N    向后切换成员
</span><span class='line'>Ctrl+E    表示退出下拉窗口, 并退回到原来录入的文字
</span><span class='line'>Ctrl+Y    表示退出下拉窗口, 并接受当前选项
</span><span class='line'>
</span><span class='line'>Ctrl+X Ctrl+L     整行补全
</span><span class='line'>Ctrl+X Ctrl+N 根据当前文件里关键字补全
</span><span class='line'>Ctrl+X Ctrl+K 根据字典补全
</span><span class='line'>Ctrl+X Ctrl+T 根据同义词字典补全
</span><span class='line'>Ctrl+X Ctrl+I 根据头文件内关键字补全
</span><span class='line'>Ctrl+X Ctrl+] 根据标签补全
</span><span class='line'>Ctrl+X Ctrl+F 补全文件名
</span><span class='line'>Ctrl+X Ctrl+D 补全宏定义
</span><span class='line'>Ctrl+X Ctrl+V 补全vim命令
</span><span class='line'>Ctrl+X Ctrl+U 用户自定义补全方式
</span><span class='line'>Ctrl+X Ctrl+S 拼写建议</span></code></pre></td></tr></table></div></figure>


<h2>11. supertab</h2>

<p>Tab键默认是根据之前输入补全，可以通过supertab插件，重定义Tab补全方式.vimrc中添加</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>let g:SuperTabRetainCompletionType=2                                
</span><span class='line'>" 0 - 不记录上次的补全方式
</span><span class='line'>" 1 - 记住上次的补全方式,直到用其他的补全命令改变它
</span><span class='line'>" 2 - 记住上次的补全方式,直到按ESC退出插入模式为止
</span><span class='line'>let g:SuperTabDefaultCompletionType="&lt;C-X&gt;&lt;C-O&gt;"       
</span><span class='line'>" 设置按下&lt;Tab&gt;后默认的补全方式, 默认是&lt;C-P&gt;</span></code></pre></td></tr></table></div></figure>


<hr />

<p>这些就是我使用的vim插件的配置过程，有个简单粗暴的方法即可完成上述配置</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd ~
</span><span class='line'>git clone https://github.com/812lcl/vim.git
</span><span class='line'>mv vim .vim
</span><span class='line'>mv .vim/vimrc-lcl .vimrc
</span><span class='line'>javac ~/.vim/autoload/Reflection.java
</span><span class='line'>mv ~/.vim/autoload/Reflection.class ~</span></code></pre></td></tr></table></div></figure>


<p>vim本身已经足够强大，这些插件是锦上添花。vim是需要不断的练习的，可以参考
<a href="http://coolshell.cn/articles/5426.html">简明Vim练级攻略</a>。</p>

<p>这里是我自己整理的一个vim、bash、git的命令操作的查询表格<a href="http://pan.baidu.com/s/1rFcMP">点击查看</a></p>

<p>参考文章：</p>

<blockquote><p><a href="http://blog.csdn.net/wooin/article/details/1858917">手把手教你把Vim改装成一个IDE编程环境</a></p>

<p><a href="http://blog.csdn.net/tge7618291/article/details/4216977">经典vim插件功能说明、安装方法和使用方法</a></p></blockquote>

<p class='post-footer'>
            original link:<a href='http://812lcl.com/blog/2013/10/24/vimcha-jian-pei-zhi-%2Cbi-jian-ide/'>http://812lcl.com/blog/2013/10/24/vimcha-jian-pei-zhi-%2Cbi-jian-ide/</a><br/>&nbsp;written by <a href='http://812lcl.com'>812lcl</a>&nbsp;posted at <a href='http://812lcl.com'>http://812lcl.com</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[多系统Linux安装及配置]]></title>
    <link href="http://812lcl.com/blog/2013/10/23/duo-xi-tong-linuxan-zhuang-ji-pei-zhi/"/>
    <updated>2013-10-23T21:54:00+08:00</updated>
    <id>http://812lcl.com/blog/2013/10/23/duo-xi-tong-linuxan-zhuang-ji-pei-zhi</id>
    <content type="html"><![CDATA[<h2>1. 多系统安装</h2>

<p>开始编程当然首先的任务是要配置好自己喜欢的编程环境，自从接触了linux，越来越喜欢linux，先后使用过fedora、centos、ubuntu三个不同的版本。fedora还是比较炫的，开始用了一段时间，但是由于一些原因之后开始使用内核版本更低的centos，并且使用了较长一段时间。fedora和centos操作都是很像的，都是和redhat很接近的发行版本，fedora内核版本更高，图形界面也更为华丽，但不如centos稳定。centos给我的感觉就是朴实、稳定，但配置到我满意的状态也是需要一番功夫的，很多软件并不支持centos，因为它的一些库版本较低，有些需要强制更新为更高版本才能用。而且学校的校园网对国外的一些网站连不通，配置centos的源也比较麻烦，还需要添加很多不同的第三方软件库，如EPEL源、RPMForge源、RPMFusion源、Rmei源。而且centos要挂载</p>

<!-- more -->


<p>ntfs的windows分区还需要安装ntfs-3g等，所以centos相对于其他版本，还是麻烦一些，至少对我来说是的。现在我一般多用ubuntu了，这个系统很好安装很好上手。centos的bin镜像要4G大小，刻进u盘里占用u盘过大空间，又不能用一次刻一次，所以常常采用的方法是，从电脑上分出一个fat32的区，方centos镜像，然后用easyBCD简历grub引导，开机引导到centos镜像进行安装。而ubuntu的镜像只有七八百兆，刻进u盘，都都可以忽略它的存在，只要开机u盘启动即可进入安装了。这里也不讲具体如何安装了，可以参考一下<a href="http://blog.csdn.net/xiazdong/article/details/7523331">U盘安装Linux图解</a>。中间linux安装过程也不多讲了，安装提示一步一步来就好了。</p>

<p>注意装linux之前最好是先把要装linux的分区分出来。我最多在一台电脑上装了四个系统：Win7、Win8、CentOS、Ubuntu。装多系统最好先windows后linux，先centos后ubuntu。而且装多系统最好有一个u盘pe，防止装的过程出错，引导项没了，windows也启动不起来。</p>

<h2>2. 更新软件源</h2>

<p>ubuntu更新软件源很方便，已经收录了国内大部分知名的源，也不需上网查找，更改<code>/etc/apt/sources.list</code>文件。</p>

<p>只需要打开软件中心->编辑->软件源，然后点击源的列表->其他站点</p>

<p>然后点选择最佳服务器，系统会根据你的网络状况，选择一个最快的源站点，最后选择即可，非常方便。</p>

<h2>3. 安装喜欢的编辑器――VIM</h2>

<p>我个人一般是习惯与使用有编辑器之神称号的vim，也是现在linu里都默认安装的编辑器，十分的高效。当然其他还有emacs，smu等等，没怎么使用过，但也都是神级编辑器。</p>

<p>vim有很多的插件，通过添加插件可以将原本就强大的vim，改装成近似IDE的样子。我也会专门写一篇文章，记录我安装配置这些插件的过程。这些插件已经上传到我的<a href="https://github.com/812lcl">GitHub</a>中，就可以很快的还原我习惯的vim设置。当然这之前需要先安装一些必备软件。包括gcc、g++编译器，java开发环境、vim插件ctags和cscope。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install gcc g++ git
</span><span class='line'>sudo apt-get install build-essential
</span><span class='line'>sudo apt-get install default-jre default-jdk
</span><span class='line'>sudo apt-get install ctags cscope</span></code></pre></td></tr></table></div></figure>


<p>必要的都安装完了，下面就是配置vim了，vim系统已经默认安装，ubuntu下也可以安装图形界面版Gvim，在软件中心里就可以搜到，安装即可。然后执行如下命令</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd ~
</span><span class='line'>git clone https://github.com/812lcl/vim.git
</span><span class='line'>mv vim .vim
</span><span class='line'>mv .vim/vimrc-lcl .vimrc</span></code></pre></td></tr></table></div></figure>


<p>配置C/C++和java的只能补全</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>javac ~/.vim/autoload/Reflection.java
</span><span class='line'>mv ~/.vim/autoload/Reflection.class ~
</span><span class='line'>cd /usr/include/c++
</span><span class='line'>ctags -R  然后在.vimrc中添加set tags+=/usr/include/c++/tags</span></code></pre></td></tr></table></div></figure>


<p>以上就配置好了vim的一系列插件，可以查看配置文件<code>.vimrc</code>，或我的另一篇文章<a href="http://812lcl.github.io/blog/2013/10/24/vimcha-jian-pei-zhi-%2Cbi-jian-ide/">VIM插件配置，比肩IDE</a>.</p>

<h2>4. 一些常用软件</h2>

<p>当然linux也是离不开娱乐的，看电影、听歌还是要的。</p>

<ul>
<li><p>听歌：自带的rhythm box播放器就可以了，但是缺少一些解码插件，打开一首歌，会自动寻找，统一安装即可。</p></li>
<li><p>看电影：我一般是安装smplayer，在软件中心里可以搜到，点点鼠标就OK了。</p></li>
<li><p>浏览器：linux都自带了firefox，但我还是习惯用chrome，软件中心里没有，去官网下一个deb包就可以了，<code>dpkg -i</code>安装。</p></li>
<li><p>虚拟机：有时候还是需要以下windows的，用个网银、MS office等等，装个虚拟机也是必要的，virtual box就搞定了，同样软件中心点一点。</p></li>
<li><p>其他：codeblocks、eclipse等，软件中心或是apt-get install即可。</p></li>
</ul>


<h2>5. 更新</h2>

<p>没有什么要设置的了，可以更新一下软件了。</p>

<pre><code>sudo apt-get update
</code></pre>

<h2>6. 其他</h2>

<p>多系统可能需要修改一下启动顺序</p>

<pre><code>sudo vim /boot/grub/grub.cfg
</code></pre>

<p>其中有一句<code>default 0</code>，修改数字即可，如启动菜单第五项是windows，要默认启动windows，改为<code>default 4</code>，保存的时候需要强制保存，输入<code>:wq!</code></p>

<p>有时候想设置开机自动挂载windows分区</p>

<pre><code>sudo vim /etc/fstab
</code></pre>

<p>添加想开机挂载的分区即可</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>/dev/sda5  /media/data     ntfs    defaults    0   0
</span><span class='line'>挂载分区  挂载位置        分区类型
</span></code></pre></td></tr></table></div></figure>


<p>很多时候需要翻墙，查阅国外网站，这就需要<a href="https://code.google.com/p/goagent/">goagent</a>了，安装过程参阅<a href="https://code.google.com/p/goagent/wiki/GoAgent_Linux">GoAgent_Linux</a>。</p>

<p>另外推荐一个工具Terminator，使用方法见<a href="http://dikar.iteye.com/blog/940085">linux 多窗口Terminator</a>。</p>

<hr />

<p>OK，流水账又记完了，主要是简单记录一下自己的linux环境配置，省得以后装系统再想还有哪些没装，Keep it simple and stupid.(KISS)</p>

<p class='post-footer'>
            original link:<a href='http://812lcl.com/blog/2013/10/23/duo-xi-tong-linuxan-zhuang-ji-pei-zhi/'>http://812lcl.com/blog/2013/10/23/duo-xi-tong-linuxan-zhuang-ji-pei-zhi/</a><br/>&nbsp;written by <a href='http://812lcl.com'>812lcl</a>&nbsp;posted at <a href='http://812lcl.com'>http://812lcl.com</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[自警自省自规划]]></title>
    <link href="http://812lcl.com/blog/2013/10/22/zi-jing-zi-sheng-zi-gui-hua/"/>
    <updated>2013-10-22T22:18:00+08:00</updated>
    <id>http://812lcl.com/blog/2013/10/22/zi-jing-zi-sheng-zi-gui-hua</id>
    <content type="html"><![CDATA[<p>经历了几天的研究终于把博客搭起来了，本博客使用了Octopress，十分简单容易上手，就连我这个对于Ruby和前端技术一概不通的人也能很快就建成属于自己的博客。但我一直是一个比较有强迫症的人，不希望自己的博客用着千篇一律的模板，总想试遍所有的插件，让它变成自己理想的样子。所以经过了多天的调试布局，才开始写这第一篇文章。这也可能是我自身拖延症的一种表现吧（我这毛病还不少），不知道怎么下笔开始写博客，不过万事开头难，我相信只要我坚持下去，一定会有收获的。今天的第一篇文章就不写博客是怎么搭建的了，想回顾一下自己的过去，展望一下将来（老调调了）。主要是反省一下自己，给自己一个警示作用，并订立一个明确的规划，希望自己能够持之以恒。</p>

<!-- more -->


<hr />

<p>现在已经是十月份了，我的校招季也算过去了，不知道算是幸运或是不幸，8月底获得了某互联网大公司的一个offer，职位并不算令自己满意，但公司是我十分向往的，当时接受了offer，心里想着“又不着急签三方，还可以再找找其他的”。但获得了offer之后整个人就松了好多，十月份各大小公司来招聘的，自然就没那么卖力了。虽然参加不多，但还是备受打击，感觉的自己的不足，也下定决心补足自己。</p>

<p>现在我在一所985名校读研究生，学的计算机专业。本科是来自一所默默无名的一本院校，高考时的失利，也许是我考研究生的最大的动力。从小学习一直不错，但高考却发挥失利，进入了一所自己不满意的学校。当时想的是“反正到时候考个好的研究生就好了”，现在想想多少有些后悔，进入了名校之后，更让我深刻体会到这一点，周围的环境确实决定了很多。这并不是在抱怨本科的学校，学校会尽自己最大的力给你最好的教育，我们应该感激。在本科时候似乎学每门课都没用很费力过，甚至很多课程都是靠考试前突击几天，照样高分通过，曾经还自诩学习能力强。回想起来才知道错过了什么，也导致了现在基础松动。当时考研，自己比较努力，也比较幸运获得了好的成绩，进入了理想的学校，这也是我有机会重新认识所学的专业，更明确自己将来想做些什么。</p>

<p>终于进入了研究生阶段，进入学校才发现周围很多的强人，和他们交谈的时候很多东西我都没听说过，他们却都能侃侃而谈，相谈甚欢。开始我都是默默地记在心里，之后再上网去搜索了解。慢慢的就发现了原来自己对所学专业的了解，甚至连入门都不算，大学真是浪费了太多时间了。从那时开始我才开始一点一点弥补不足，希望能赶上他人的脚步。开始的时候上课，学到很多的知识，从网上和周围同学那也接触到一些时下比较火的技术，如数据挖掘、信息检索、机器学习等等。也曾探索过一些方向，但发现没有实际的项目加以运用，只停留在讲课内容，理论层面，而且也不是我将来想从事的方向。之后也对自己的研究方向进行过思考，发现自己兴趣在于linux系统层开发，一个原因是linux的魅力，还有就是周围同学的影响，最后就是项目相关，用于实践。</p>

<p>一年的时间很快就过去了，追赶的脚步还在继续，但他人前进的脚步一点也不慢于我，所以差距一直存在，这似乎也在消磨我的自信心，自卑感逐渐加强。研二上学期就面临校招，我总想，若是再给我一年的时间就好了，现在我所准备的并不足以信心十足的面对校招，取得理想offer。但不回一切都顺你心意的，该来的总是要来。开学要毕业论文开题答辩，准备的焦头烂额。刚答辩完就去参加了我的第一次笔试，也是人生中应聘的第二次笔试。笔试还顺利，晚上就收到面试通知。自己还是很紧张，比较没有过面试经历，而且对自己的技术也并不有信心。果然第二天的面试及其惨烈，算法答得一塌糊涂，linux问的及其深入，都是内核方面的问题，交叉面了两轮，然后就没有然后了，我也知道这是婉拒了。毕竟自己的表现自己清楚。也是这次面试给了我极大的打击，甚至有一些阴影，感觉自己什么都不会，什么都不行，不敢去面试，有时候甚至消极地想最后笔试都不要过。接下来我也没有广投简历，只是投了几家比自己手中offer好的公司，有些面试感受很好，也相对顺利，但最后也是一无所获。就这样也就在前不久把三方寄给了某度，工作就这么定了。找工作的过程并不算很曲折，因为早早的提前offer使自己心里有底，但面其他公司也充分让我感受的自身的不足，也让我清楚的认识到，我还是想要走技术这条路，进入国企银行混个北京户口并不是我那么想要的。总之是与我有益的。</p>

<p>既然工作定了就该想一想自己以后的路了，距离入职还有小一年的时间。该好好计划一下这段时间了，估计今后也不会有这么自由的时间了。我打算主要从三条线进行查漏补缺：</p>

<ol>
<li>重新学习C语言（不要以为它很简单），数据结构与算法。

<blockquote><p>参考书籍：<a href="http://www.amazon.cn/C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80-%E5%85%8B%E5%B0%BC%E6%B1%89/dp/B0011425T8/ref=sr_1_1?ie=UTF8&amp;qid=1382437254&amp;sr=8-1&amp;keywords=C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80">C程序设计语言</a>、
<a href="http://www.amazon.cn/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90-C%E8%AF%AD%E8%A8%80%E6%8F%8F%E8%BF%B0-%E7%BB%B4%E6%96%AF/dp/B002WC7NGS/ref=sr_1_1?ie=UTF8&amp;qid=1382437316&amp;sr=8-1&amp;keywords=%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90">数据结构与算法分析</a>、
<a href="http://www.amazon.cn/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA-Thomas-H-Cormen/dp/B00AK7BYJY/ref=sr_1_1?ie=UTF8&amp;qid=1382437342&amp;sr=8-1&amp;keywords=%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA">算法导论</a></p></blockquote></li>
<li>操作系统、linux内核与系统编程

<blockquote><p>参考书籍：<a href="http://www.amazon.cn/UNIX%E7%8E%AF%E5%A2%83%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B-%E5%8F%B2%E8%92%82%E6%96%87%E6%96%AF/dp/B00114GRG0/ref=sr_1_1?ie=UTF8&amp;qid=1382437399&amp;sr=8-1&amp;keywords=UNIX%E7%8E%AF%E5%A2%83%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B">UNIX环境高级编程</a>、
<a href="http://www.amazon.cn/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3LINUX%E5%86%85%E6%A0%B8-%E5%8D%9A%E9%9F%A6/dp/B0011F5RYM/ref=sr_1_1?ie=UTF8&amp;qid=1382437438&amp;sr=8-1&amp;keywords=%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3linux%E5%86%85%E6%A0%B8">深入理解linux内核</a>、
<a href="http://www.amazon.cn/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%9B%E4%B9%A6-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E5%B8%83%E8%8E%B1%E6%81%A9%E7%89%B9/dp/B004BJ18KM/ref=sr_1_1?ie=UTF8&amp;qid=1382437465&amp;sr=8-1&amp;keywords=%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F">深入理解计算机系统</a></p></blockquote></li>
<li>其他感兴趣技术，如<a href="http://812lcl.github.io/">个人博客</a>、<code>Github</code>、<code>shell</code>、<code>latex</code>、<code>vim</code>。搭了这个博客后，也
有一点想稍微学一下web前端技术与Ruby的想法。</li>
</ol>


<p>这是一个很粗略的规划，要学的东西很多，按照陈皓的<a href="http://coolshell.cn/articles/4990.html">程序员技术练级攻略</a>，自己在启蒙入门还有很多需要学习。看书必须与动手实践相结合，很多书之前也都看过，可一段时间用，又忘了，现在是一个知识快餐化的时代，来的快走的快，反复实践才能留住知识。写这篇文章也只是想驱动自己马上开始，拖延症是病，得治啊，文章写的我都惨不认识，但坚持下去肯定会越写越好，这篇文章是为了警示自己，我还有很多东西要学，现在不学迟早是要补的。当然做好一件事我个人觉得需要两点：耻辱感和成就感。知耻而后勇，耻辱感会刺激你更努力，做得更好。但一直努力仍然没有回报，你也不会坚持下去，所以还需要成就感，即使小小的成就。成就感会使你更开心的努力，而且小小的成就慢慢积累也许就会达到你不敢想象的程度。</p>

<p>加油吧，少年，我改努力了！</p>

<p class='post-footer'>
            original link:<a href='http://812lcl.com/blog/2013/10/22/zi-jing-zi-sheng-zi-gui-hua/'>http://812lcl.com/blog/2013/10/22/zi-jing-zi-sheng-zi-gui-hua/</a><br/>&nbsp;written by <a href='http://812lcl.com'>812lcl</a>&nbsp;posted at <a href='http://812lcl.com'>http://812lcl.com</a></p>

]]></content>
  </entry>
  
</feed>
